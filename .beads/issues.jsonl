{"id":"buh-08m","title":"gh-114: CSV Injection Vulnerability in Feedback Export","description":"GitHub Issue: #114 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Chat titles/usernames not sanitized before CSV export\nSolution: Escape fields starting with =, +, -, @ in CSV output\nFiles: backend/src/api/trpc/routers/feedback.ts:474-489\nExecutor: MAIN\nSimilar: gh-133 (closed as duplicate)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:53.079624485+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:16.970576046+03:00","closed_at":"2026-02-17T11:21:16.970576046+03:00","close_reason":"Added CSV injection protection: prefix formula-triggering chars (=,+,-,@) with single quote (gh-114)","external_ref":"gh-114","dependencies":[{"issue_id":"buh-08m","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:53.081000366+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-08q","title":"Fix: Messages silently dropped when slaEnabled=false","description":"message.handler.ts:96-103 делает early return ДО логирования в ChatMessage когда !slaEnabled. Фикс: оставить только !monitoringEnabled в раннем return, добавить !slaEnabled check ПОСЛЕ логирования (после line 181)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:13.455454247+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:56.760663798+03:00","closed_at":"2026-02-11T20:25:56.760663798+03:00","close_reason":"Fixed: moved SLA check after message logging in message.handler.ts — messages always logged to ChatMessage, SLA classification gated separately","external_ref":"gh-31a"}
{"id":"buh-0a92","title":"gh-92: Alert callback resolve not atomic","description":"Score: 14 (sev=5, imp=5, lkh=4). resolveAlert + cancelEscalation + request update are separate operations. If request update fails, inconsistent state. Fix: wrap DB ops in transaction. File: alert-callback.handler.ts","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:54:36.681717596+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:06.18171221+03:00","closed_at":"2026-02-17T12:02:06.181714087+03:00","external_ref":"gh-92","dependencies":[{"issue_id":"buh-0a92","depends_on_id":"buh-wrhc","type":"blocks","created_at":"2026-02-17T11:55:00.746620372+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-0sl","title":"DEV MODE: Backend ENV Configuration","description":"Add DEV_MODE and DEV_USER_EMAIL to env.ts schema with proper validation. Export isDevMode helper function.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:06.153147623+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.5933972+03:00","closed_at":"2026-01-30T17:34:34.5933972+03:00","close_reason":"Implemented"}
{"id":"buh-187","title":"gh-128: In-Memory Rate Limiting Not for Multi-Instance","description":"GitHub Issue: #128 | Score: 10 (sev=5, imp=3, lkh=2)\nRoot Cause: Same as #95 but in middleware layer\nSolution: Migrate to Redis-based rate limiting\nFiles: backend/src/middleware/rate-limit.ts:116-118\nExecutor: general-purpose\nRelated: buh-55m (gh-95)","status":"open","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:29.541111019+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:46:29.671812303+03:00","defer_until":"2026-05-17T11:46:29.671181347+03:00","external_ref":"gh-128","dependencies":[{"issue_id":"buh-187","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:29.542310367+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-1t9","title":"Add frontend unit tests for ChatSettingsForm","description":"Code review: test submit payload includes all fields, toggle state, form validation. File: frontend/src/components/chats/__tests__/ChatSettingsForm.test.tsx","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T12:29:50.545316327+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T12:57:01.576322955+03:00","closed_at":"2026-02-12T12:57:01.576322955+03:00","close_reason":"Frontend unit tests for ChatSettingsForm: 34 tests covering rendering, defaults, form submission, mutation callbacks, warnings, errors, interactions, edge cases"}
{"id":"buh-1v0","title":"Change request resolution from FIFO to LIFO","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:44:35.485647435+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:46:43.78939+03:00","closed_at":"2026-01-30T13:46:43.78939+03:00","close_reason":"Implemented FIFO→LIFO: findLatestPendingRequest with desc ordering","external_ref":"gh-15"}
{"id":"buh-21m","title":"DEV MODE: Frontend tRPC Client","description":"Modify frontend/src/lib/trpc.ts to send X-Dev-Mode header when isDevMode is true.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:18.350260118+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.02395991+03:00","closed_at":"2026-01-30T17:36:16.02395991+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-21m","depends_on_id":"buh-3wu","type":"blocks","created_at":"2026-01-30T17:32:33.309007332+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-22b","title":"gh-124: No FAQ Caching","description":"GitHub Issue: #124 | Score: 18 (sev=5, imp=3, lkh=10)\nRoot Cause: DB query on every FAQ classification without caching\nSolution: Add Redis/in-memory cache for FAQ entries with TTL\nFiles: backend/src/services/faq/matcher.service.ts:66-74\nExecutor: general-purpose","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:58.673479058+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:37.421020967+03:00","closed_at":"2026-02-17T10:28:37.421020967+03:00","close_reason":"Added in-memory FAQ cache with 5min TTL via getCachedFaqItems() (gh-124)","external_ref":"gh-124","dependencies":[{"issue_id":"buh-22b","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:58.674584054+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-2d7","title":"Enhancement: Validate accountant @username against Telegram/DB (gh-38-a)","status":"closed","priority":3,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:43:04.731342065+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T12:38:13.242407752+03:00","closed_at":"2026-02-12T12:38:13.242407752+03:00","close_reason":"Implemented non-blocking username validation against DB with warnings display"}
{"id":"buh-2mo","title":"gh-109: No Idempotency in SLA Reconciliation Job","description":"GitHub Issue: #109 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: No distributed locking during reconciliation\nSolution: Use Redis lock to prevent concurrent reconciliation\nFiles: backend/src/jobs/sla-reconciliation.job.ts:33-64\nExecutor: sla-backend-specialist","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:50.167125721+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:07.960382116+03:00","closed_at":"2026-02-17T11:21:07.960382116+03:00","close_reason":"Added Redis distributed lock (SETNX) around reconciliation to prevent concurrent runs (gh-109)","external_ref":"gh-109","dependencies":[{"issue_id":"buh-2mo","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:50.1682827+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-2mo","depends_on_id":"buh-hj1","type":"blocks","created_at":"2026-02-17T09:12:24.056048573+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-2vc","title":"Auto-send SLA breach notification to group chat","status":"closed","priority":3,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:44:38.511395968+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:53:03.456259467+03:00","closed_at":"2026-01-30T13:53:03.456259467+03:00","close_reason":"Implemented notifyInChatOnBreach: Prisma field, worker logic, format function, UI toggle","external_ref":"gh-12"}
{"id":"buh-34f","title":"gh-99: Duplicate Alert Creation Race Condition","description":"GitHub Issue: #99 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: No unique constraint or locking for alert creation\nSolution: Add unique constraint on (requestId, type) or use distributed lock\nFiles: backend/src/services/alerts/alert.service.ts:85-124\nExecutor: database-architect","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:32.901254389+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:37.689979912+03:00","closed_at":"2026-02-17T10:28:37.689979912+03:00","close_reason":"Added idempotency check for existing unresolved alert before creating duplicate (gh-99)","external_ref":"gh-99","dependencies":[{"issue_id":"buh-34f","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:32.902385765+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-3fb","title":"P1: Fix recovery logic to use global manager fallback","description":"timer.service.ts:681-689 - Recovery uses getManagersForChat() without global fallback. Add fallback to global managers.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:18.349454368+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.840912472+03:00","closed_at":"2026-01-14T16:15:17.840912472+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-3hv","title":"gh-142: Alert Callback Notification Lacks Idempotency","description":"GitHub Issue: #142 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Duplicate notifications sent on callback retry\nSolution: Add idempotency check before sending notifications\nFiles: backend/src/bot/handlers/alert-callback.handler.ts:207-230\nExecutor: general-purpose","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:54.126276976+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.680257086+03:00","closed_at":"2026-02-17T11:41:06.680257086+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-142","dependencies":[{"issue_id":"buh-3hv","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:54.127417902+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-3wu","title":"DEV MODE: Frontend Config Module","description":"Create frontend/src/lib/config.ts with isDevMode and devMockUser exports.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:16.274647906+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.599872289+03:00","closed_at":"2026-01-30T17:34:34.599872289+03:00","close_reason":"Implemented"}
{"id":"buh-4pp","title":"gh-146: Unused QUERY_TIMEOUT Constant","description":"GitHub Issue: #146 | Score: 12 (sev=2, imp=0, lkh=10)\nRoot Cause: Unused constant in database client\nSolution: Remove unused QUERY_TIMEOUT constant\nFiles: backend/src/db/client.ts:32\nExecutor: MAIN (dead code removal)","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:56.920401996+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.681304415+03:00","closed_at":"2026-02-17T11:41:06.681304415+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-146","dependencies":[{"issue_id":"buh-4pp","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:56.922101202+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-4qm","title":"gh-154: TOCTOU in Audit Trail","description":"GitHub Issue: #154 | Score: 7 (sev=2, imp=0, lkh=5)\nRoot Cause: Time-of-check-time-of-use in audit trail implementation\nSolution: Use transaction for atomic audit trail operations\nFiles: backend/src/lib/prisma.ts:177\nExecutor: MAIN","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:35.941876356+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:48.845144412+03:00","closed_at":"2026-02-17T11:45:48.845144412+03:00","close_reason":"Won't fix: documented TOCTOU in audit trail (best-effort, Prisma  limitation)","external_ref":"gh-154","dependencies":[{"issue_id":"buh-4qm","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:35.942958489+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-4ru","title":"P2: Add transaction boundaries for SLA breach handling","description":"sla-timer.worker.ts:77-101 - Multiple DB updates without transaction. Use prisma.$transaction for atomic operations.","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:19.746350333+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.835558086+03:00","closed_at":"2026-01-14T16:17:39.835558086+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-4v3","title":"Fix: SLA compliance excludes pending requests from denominator","description":"Code review finding: analytics.ts slaCompliance counts pending (unanswered, not-yet-breached) requests in totalRequests but they are not classified. This dilutes compliance %. Fix: exclude pending from denominator. File: backend/src/api/trpc/routers/analytics.ts lines 94-117","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:44:58.400806121+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:46:15.612035299+03:00","closed_at":"2026-02-12T13:46:15.612035299+03:00","close_reason":"Fixed: introduced classifiedRequests counter, pending requests excluded from compliance denominator","external_ref":"review-2"}
{"id":"buh-4y9","title":"Add distributed tracing (gh-77)","description":"REOPENED: OpenTelemetry + OTLP exporter configured in tracing.ts (lines 32-41). Missing: Jaeger service in docker-compose. Need: jaeger all-in-one container (port 16686 UI, 4318 OTLP), OTEL_TRACING_ENABLED=true in backend env, document Jaeger UI access.","status":"closed","priority":4,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T20:04:41.516824994+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T10:56:25.811201861+03:00","closed_at":"2026-02-16T10:56:25.811201861+03:00","close_reason":"Added Jaeger all-in-one service to both docker-compose.yml (prod with Badger storage) and docker-compose.local.yml. OTEL_TRACING_ENABLED=true and OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318 added to backend env. UI at port 16686.","external_ref":"gh-77"}
{"id":"buh-55m","title":"gh-95: Ineffective In-Memory Rate Limiting","description":"GitHub Issue: #95 | Score: 10 (sev=5, imp=3, lkh=2)\nRoot Cause: In-memory Map rate limiter doesn't work across instances\nNote: Single VDS deployment - low actual risk currently\nSolution: Migrate to Redis-based rate limiting\nFiles: backend/src/api/trpc/routers/messages.ts:15-56\nExecutor: general-purpose","status":"open","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:12.386662438+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:46:29.116043522+03:00","defer_until":"2026-05-17T11:46:29.115418454+03:00","external_ref":"gh-95","dependencies":[{"issue_id":"buh-55m","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:12.388001664+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-58u","title":"gh-119: Information Disclosure in /info Command","description":"GitHub Issue: #119 | Score: 22 (sev=5, imp=7, lkh=10)\nRoot Cause: /info command exposes Chat ID and User ID to any user\nSolution: Remove or restrict sensitive identifiers from /info output\nFiles: backend/src/bot/handlers/system.handler.ts:39-46\nExecutor: general-purpose","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:24.400498773+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:44:28.46342122+03:00","closed_at":"2026-02-17T09:44:28.46342122+03:00","close_reason":"Closed","external_ref":"gh-119","dependencies":[{"issue_id":"buh-58u","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:24.401722715+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-5bxy","title":"gh-90: OpenRouter API key falls back to empty string","description":"Score: 8 (sev=3, imp=3, lkh=2). If OPENROUTER_API_KEY not set, client uses empty string. Has graceful fallback to keyword classifier. Fix: track apiKeyConfigured flag, skip AI if no key. File: openrouter-client.ts","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:54:52.557106354+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:07.300393465+03:00","closed_at":"2026-02-17T12:02:07.300395202+03:00","external_ref":"gh-90","dependencies":[{"issue_id":"buh-5bxy","depends_on_id":"buh-wrhc","type":"blocks","created_at":"2026-02-17T11:55:01.892915785+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-5h3","title":"DEV MODE: Context Auth Bypass","description":"Modify context.ts to return mock admin user when isDevMode is true. Use existing logger instead of console.log.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:09.081496197+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.01021549+03:00","closed_at":"2026-01-30T17:36:16.01021549+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-5h3","depends_on_id":"buh-0sl","type":"blocks","created_at":"2026-01-30T17:32:32.80521142+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-5m0","title":"Fix Prettier formatting in 7 files","description":"CI fails on Format job: 7 files have style issues. Files: backend/src/services/classifier/feedback.processor.ts, backend/src/services/sla/request.service.ts, frontend/src/components/requests/RequestsTable.tsx, frontend/src/components/requests/ThreadTimeline.tsx, frontend/src/components/settings/ClassificationSettingsForm.tsx, frontend/src/components/settings/DataRetentionSettingsForm.tsx, infrastructure/docker-compose.local.yml. Fix: run prettier --write on them.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-16T19:04:26.225905308+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T19:07:01.861270135+03:00","closed_at":"2026-02-16T19:07:01.861270135+03:00","close_reason":"Fixed: prettier --write on 7 files + npm install to sync package-lock.json"}
{"id":"buh-5ph","title":"Security: Add auth for Grafana/Uptime Kuma (gh-65)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:22.976742079+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:36:34.634520236+03:00","closed_at":"2026-02-14T17:36:34.634520236+03:00","close_reason":"Added basic auth for Grafana/Uptime Kuma in nginx","external_ref":"gh-65"}
{"id":"buh-5vh","title":"gh-97: Fail-Open Rate Limiting","description":"GitHub Issue: #97 | Score: 19 (sev=7, imp=7, lkh=5)\nRoot Cause: Redis unavailable → rate limiter allows ALL requests through\nSolution: Implement fail-closed with in-memory fallback when Redis down\nFiles: backend/src/bot/middleware/rate-limit.ts:162-173\nExecutor: general-purpose","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:40.464658987+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:27.347302985+03:00","closed_at":"2026-02-17T10:28:27.347302985+03:00","close_reason":"Changed fail-open to fail-closed: deny requests when Redis unavailable (gh-97)","external_ref":"gh-97","dependencies":[{"issue_id":"buh-5vh","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:40.465982692+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-5vh","depends_on_id":"buh-cme","type":"blocks","created_at":"2026-02-17T09:12:22.643354604+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-608","title":"Add enhanced request state machine (gh-69)","description":"REOPENED: isValidTransition() defined at request.service.ts:47 but NOT called in updateRequestStatus() at line 109. FIX: Add validation call before prisma.clientRequest.update(), throw InvalidStateTransitionError. Also add to markRequestAsAnswered(). Add unit tests for invalid transitions.","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T19:36:44.540160169+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T10:55:55.111555214+03:00","closed_at":"2026-02-16T10:55:55.111555214+03:00","close_reason":"Added isValidTransition() calls to updateRequestStatus() and markRequestAsAnswered(). Throws Error on invalid transitions. Type-check passes.","external_ref":"gh-69"}
{"id":"buh-616","title":"gh-96: Empty String Can Clear API Keys","description":"GitHub Issue: #96 | Score: 19 (sev=7, imp=7, lkh=5)\nRoot Cause: Empty string passes undefined filter and overwrites API key\nSolution: Add .min(1) to Zod schema or filter empty strings alongside undefined\nFiles: backend/src/api/trpc/routers/settings.ts:339-383\nExecutor: MAIN (simple validation fix)\nSimilar: gh-160 (closed as duplicate)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:29.044286691+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:44:28.467209695+03:00","closed_at":"2026-02-17T09:44:28.467209695+03:00","close_reason":"Closed","external_ref":"gh-96","dependencies":[{"issue_id":"buh-616","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:29.045609419+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-61r","title":"gh-102: No Thread Safety in Circuit Breaker","description":"GitHub Issue: #102 | Score: 10 (sev=5, imp=3, lkh=2)\nRoot Cause: In-memory circuit breaker state not shared across processes\nNote: Single VDS deployment - low actual risk currently\nSolution: Move circuit breaker state to Redis\nFiles: backend/src/services/classifier/circuit-breaker.ts:46-158\nExecutor: general-purpose","status":"open","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:13.902507033+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:46:29.387851603+03:00","defer_until":"2026-05-17T11:46:29.387204266+03:00","external_ref":"gh-102","dependencies":[{"issue_id":"buh-61r","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:13.903641966+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-63c","title":"gh-110: Missing Cascade Delete on ClientRequest.chat","description":"GitHub Issue: #110 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: No onDelete cascade on ClientRequest.chat relation\nSolution: Add onDelete: Cascade to Prisma schema, create migration\nFiles: backend/prisma/schema.prisma:292-293\nExecutor: database-architect\nSimilar: gh-139 (closed as duplicate)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:51.1332854+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:08.272933155+03:00","closed_at":"2026-02-17T11:21:08.272933155+03:00","close_reason":"Added onDelete:Cascade on ClientRequest, FeedbackResponse, SurveyDelivery, WorkingSchedule chat relations + migration (gh-110)","external_ref":"gh-110","dependencies":[{"issue_id":"buh-63c","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:51.1343858+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-65g","title":"Phase 2: Implement ErrorCaptureService with fingerprinting","description":"Create error-capture.service.ts with fingerprinting logic (MD5 hash normalization). Add DatabaseTransport to Winston logger for automatic error capture to DB.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:39.030251238+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:15:27.642114722+03:00","closed_at":"2026-01-16T14:15:27.642114722+03:00","close_reason":"ErrorCaptureService implemented with MD5 fingerprinting, normalization (UUIDs, timestamps, numbers), 24h deduplication window, Winston DatabaseTransport integration complete, type-check passed"}
{"id":"buh-6ku","title":"Fix: auth.me HTTP 500 in DEV_MODE — auto-upsert dev user if not found","description":"GitHub Issue #45. auth.me (auth.ts:70-81) throws 'User not found' when dev user UUID not in DB. Fix: if isDevMode and user not found, auto-upsert from DEV_MODE_USER context data. Files: backend/src/api/trpc/routers/auth.ts:65-81, backend/src/api/trpc/context.ts:47-52","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:51:15.863425623+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:57:17.595991019+03:00","closed_at":"2026-02-12T13:57:17.595991019+03:00","close_reason":"Auto-upsert dev user in auth.me when DEV_MODE and user not found","external_ref":"gh-45"}
{"id":"buh-6lz","title":"gh-155: Runtime Env Check for Webhook Secret","description":"GitHub Issue: #155 | Score: 10 (sev=2, imp=3, lkh=5)\nRoot Cause: Missing runtime check for webhook secret at startup\nSolution: Add startup validation for TELEGRAM_WEBHOOK_SECRET\nFiles: backend/src/middleware/telegram-signature.ts:211\nExecutor: MAIN\nSimilar: gh-152 (closed as duplicate)","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:50.004319238+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:35.171545984+03:00","closed_at":"2026-02-17T11:45:35.171545984+03:00","close_reason":"Fixed: startup warning for missing webhook secret","external_ref":"gh-155","dependencies":[{"issue_id":"buh-6lz","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:50.005532088+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-6m0","title":"Fix SLA Timer ignores GlobalSettings working hours","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:12.052978806+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.751451128+03:00","closed_at":"2026-01-30T13:09:12.751451128+03:00","close_reason":"Fixed all bugs, type-check and build passed"}
{"id":"buh-6qm","title":"Fix: SLA save blocked when no managers configured (gh-38)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:42:46.650794234+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:44:38.274292578+03:00","closed_at":"2026-02-12T11:44:38.274292578+03:00","close_reason":"Fixed in commit f99b367","external_ref":"gh-38"}
{"id":"buh-703","title":"Add request thread tracking (gh-75)","description":"REOPENED: thread_id in schema + getThread endpoint exist but NO frontend visualization. Need: thread indicators on RequestsTable/RecentRequestsTable, thread timeline in RequestDetailsContent, ThreadView component. No frontend files reference threadId currently. Tech: Next.js App Router, shadcn/ui, Tailwind CSS 4.","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T20:04:39.555136726+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T11:07:58.939483851+03:00","closed_at":"2026-02-16T11:07:58.939483851+03:00","close_reason":"ThreadTimeline vertical component with status badges, current request highlight, request linking. getThread tRPC endpoint. Integrated into RequestDetailsContent.","external_ref":"gh-75"}
{"id":"buh-715","title":"DEV MODE: Seed Script Dev User","description":"Add DEV_ADMIN user with UUID aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa to seed.ts.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:14.901348277+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.626351653+03:00","closed_at":"2026-01-30T17:34:34.626351653+03:00","close_reason":"Implemented"}
{"id":"buh-78q","title":"Add logging when no managers configured for alerts","description":"В backend/src/queues/alert.worker.ts добавить logger.warn когда managerIds.length === 0","status":"closed","priority":3,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:05:44.706863307+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.847639593+03:00","closed_at":"2026-01-14T16:15:17.847639593+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-7bc","title":"Fix: SLA breach notification leaks into client chat (notifyInChatOnBreach default)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:17:58.777150877+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:56.513413434+03:00","closed_at":"2026-02-11T20:25:56.513413434+03:00","close_reason":"Fixed: changed notifyInChatOnBreach @default(true)→@default(false) in schema, migration updates existing rows, registerChat default changed, frontend defaults fixed, JSDoc @test-only added to worker","external_ref":"gh-31"}
{"id":"buh-7hmb","title":"Add SSL validation to env schema","description":"Add DATABASE_URL refine in env.ts to reject non-SSL URLs in production at startup","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T10:02:45.417419777+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:06:36.900928902+03:00","closed_at":"2026-02-17T10:06:36.900928902+03:00","close_reason":"Closed"}
{"id":"buh-7it","title":"gh-165: Replace Math.random with Crypto","description":"GitHub Issue: #165 | Score: 4 (sev=2, imp=0, lkh=2)\nRoot Cause: Math.random() used instead of crypto.randomUUID for nonces\nSolution: Replace with crypto.randomUUID() or crypto.getRandomValues()\nFiles: backend/src/api/trpc/context.ts:112\nExecutor: MAIN\nSimilar: gh-147 (closed as duplicate)","status":"closed","priority":4,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:12:00.562044909+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:48.555064864+03:00","closed_at":"2026-02-17T11:45:48.555064864+03:00","close_reason":"Already fixed in P1 security commit: Math.random replaced","external_ref":"gh-165","dependencies":[{"issue_id":"buh-7it","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:12:00.56323366+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-7l6","title":"gh-127: TLS Verification Disabled in Development","description":"GitHub Issue: #127 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: TLS verification disabled in dev could leak to production\nSolution: Ensure TLS verification is always enabled in production\nFiles: backend/src/lib/prisma.ts:123-127\nExecutor: MAIN\nRelated: buh-ev1 (gh-126 SSL enforcement)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:23.275877429+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.673803466+03:00","closed_at":"2026-02-17T11:41:06.673803466+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-127","dependencies":[{"issue_id":"buh-7l6","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:23.277112293+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-7l6","depends_on_id":"buh-ev1","type":"blocks","created_at":"2026-02-17T09:12:22.060063871+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-7ly","title":"Fix alert shows 0 minutes instead of actual time","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:07.407544902+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:05:11.112542925+03:00","closed_at":"2026-01-30T13:05:11.112542925+03:00","close_reason":"Fixed: use slaAlerts[0].minutesElapsed instead of slaWorkingMinutes"}
{"id":"buh-7sj","title":"gh-115: Thread Creation Race Condition","description":"GitHub Issue: #115 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Concurrent replies to same parent generate different thread IDs\nSolution: Use atomic upsert or distributed lock for thread creation\nFiles: backend/src/bot/handlers/message.handler.ts:314-327\nExecutor: general-purpose","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:05.78930127+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:17.262694329+03:00","closed_at":"2026-02-17T11:21:17.262694329+03:00","close_reason":"Used atomic updateMany with threadId=null condition + refresh on conflict (gh-115)","external_ref":"gh-115","dependencies":[{"issue_id":"buh-7sj","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:05.790636793+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-7uh","title":"gh-140: Missing Cascade Delete on SlaAlert.request","description":"GitHub Issue: #140 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: No onDelete cascade on SlaAlert.request relation\nSolution: Add onDelete: Cascade to Prisma schema\nFiles: backend/prisma/schema.prisma:380\nExecutor: database-architect","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:41.870031003+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:33.97725443+03:00","closed_at":"2026-02-17T11:45:33.97725443+03:00","close_reason":"Fixed: onDelete Cascade on SlaAlert.request + migration","external_ref":"gh-140","dependencies":[{"issue_id":"buh-7uh","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:41.871142488+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-7uh","depends_on_id":"buh-el4","type":"blocks","created_at":"2026-02-17T09:12:23.20210581+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-7wu","title":"gh-121: Missing UUID Validation in Alert Service","description":"GitHub Issue: #121 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Invalid UUIDs passed to database queries\nSolution: Add UUID format validation at service entry point\nFiles: backend/src/services/alerts/alert.service.ts:74-95\nExecutor: MAIN","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:09.057655435+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.671702854+03:00","closed_at":"2026-02-17T11:41:06.671702854+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-121","dependencies":[{"issue_id":"buh-7wu","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:09.058876102+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-843","title":"gh-130: Placeholder Supabase Credentials in Dev Mode","description":"GitHub Issue: #130 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Fallback to placeholder credentials in dev could leak to prod\nSolution: Remove placeholder fallback, require explicit env vars\nFiles: backend/src/lib/supabase.ts:25-26\nExecutor: MAIN\nSimilar: gh-138 (closed as duplicate)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:24.32893214+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.6748968+03:00","closed_at":"2026-02-17T11:41:06.6748968+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-130","dependencies":[{"issue_id":"buh-843","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:24.330206226+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-847","title":"Optimize dashboard query performance (gh-71)","description":"REOPENED: N+1 fixed but Redis caching missing. Redis client at backend/src/lib/redis.ts ready. FIX: Add cache wrapper to getDashboard in analytics.ts:374 with 5min TTL. Invalidate on request status changes. Add cache hit/miss prom-client metrics.","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T19:36:46.791166981+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T11:07:56.59185204+03:00","closed_at":"2026-02-16T11:07:56.59185204+03:00","close_reason":"Redis caching for getDashboard (5-min TTL), invalidateDashboardCache() export, Date reconstruction from JSON, Prometheus cache hit/miss counters.","external_ref":"gh-71"}
{"id":"buh-87v","title":"Fix: AccountantSelect missing ARIA attributes (gh-59)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:15.586271286+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:33:42.992169106+03:00","closed_at":"2026-02-14T17:33:42.992169106+03:00","close_reason":"Fixed: ESLint errors resolved, type-check passed","external_ref":"gh-59"}
{"id":"buh-8c16","title":"Add format validation for OpenRouter API keys","description":"Add startsWith sk-or- validation to openrouterApiKey in settings schema","status":"closed","priority":3,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T10:02:45.961342473+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:06:36.903206214+03:00","closed_at":"2026-02-17T10:06:36.903206214+03:00","close_reason":"Closed"}
{"id":"buh-8hb","title":"Investigate data bug gh-50","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:37:07.325475627+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:45:28.232547413+03:00","closed_at":"2026-02-14T17:45:28.232547413+03:00","close_reason":"Fixed: SLA page dateRange now zeros hours on startDate and sets 23:59:59 on endDate for consistent day boundaries.","external_ref":"gh-50"}
{"id":"buh-8nrn","title":"gh-87: submitRating missing ownership verification","description":"Score: 15 (sev=7, imp=5, lkh=3). submitRating tRPC endpoint is public, accepts any UUID. Mitigated by UUID unguessability + Telegram handler has chatId check. Fix: verify delivery status is 'delivered' not 'pending'. File: feedback.ts","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:54:35.643909024+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:05.904383479+03:00","closed_at":"2026-02-17T12:02:05.904385257+03:00","external_ref":"gh-87","dependencies":[{"issue_id":"buh-8nrn","depends_on_id":"buh-wrhc","type":"blocks","created_at":"2026-02-17T11:55:00.430671997+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-8rf","title":"Security: Block /metrics endpoint from external access (gh-62)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:19.071611119+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:36:33.955974446+03:00","closed_at":"2026-02-14T17:36:33.955974446+03:00","close_reason":"Added IP check in Express + nginx deny block for /metrics","external_ref":"gh-62"}
{"id":"buh-8rg","title":"Auth check for requests.getById","description":"Add chat-based authorization: observers can only view requests in chats assigned to them","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:50:38.47314131+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:52:34.779734191+03:00","closed_at":"2026-02-17T09:52:34.779734191+03:00","close_reason":"Closed"}
{"id":"buh-8tp","title":"Add invite_link to Chat model and fetch on registration","description":"## Context\n- Chat model has no inviteLink field\n- t.me/c/ links only work for supergroups, not regular groups\n- Need to store invite_link in DB and use it for 'Open chat' button\n\n## Requirements\n1. Add inviteLink field to Chat model (prisma schema)\n2. Create migration\n3. On chat registration (/connect), fetch invite link via Telegram API:\n   - ctx.telegram.exportChatInviteLink(chatId) or createChatInviteLink\n4. Store invite_link in Chat record\n5. Update alert.keyboard.ts to use inviteLink if available, fallback to t.me/c/ for supergroups\n\n## Files to modify\n- backend/prisma/schema.prisma (add inviteLink String?)\n- backend/src/bot/handlers/invitation.handler.ts (fetch and store invite link)\n- backend/src/bot/keyboards/alert.keyboard.ts (use inviteLink in buildAlertKeyboard)\n\n## Telegram API\n- ctx.telegram.exportChatInviteLink(chatId) - returns primary invite link\n- ctx.telegram.createChatInviteLink(chatId) - creates new invite link","status":"closed","priority":1,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:40:41.02058533+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:49:01.6098149+03:00","closed_at":"2026-01-14T16:49:01.6098149+03:00","close_reason":"Implemented and deployed"}
{"id":"buh-9e6","title":"Security: Enforce notifyInChatOnBreach server-side (gh-64)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:21.874352632+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:36:34.408378469+03:00","closed_at":"2026-02-14T17:36:34.408378469+03:00","close_reason":"Added production guard blocking notifyInChatOnBreach=true","external_ref":"gh-64"}
{"id":"buh-9l4","title":"Schedule SLA timer reconciliation job (gh-67)","description":"Recovery function exists at timer.service.ts:605-763 but isn't scheduled. Create cron job in backend/src/jobs/ to run every 5 min, calling reconcileOrphanedTimers. Register in index.ts.","status":"closed","priority":1,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T19:36:41.556032571+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T19:41:53.360581122+03:00","closed_at":"2026-02-14T19:41:53.360581122+03:00","close_reason":"Implemented SLA reconciliation cron job (gh-67): created sla-reconciliation.job.ts with BullMQ worker running every 5 minutes, added queue to setup.ts, registered in index.ts startup","external_ref":"gh-67"}
{"id":"buh-9pw","title":"Fix: slaEnabled schema default contradicts actual behavior","description":"P2-1 from code review. Schema has @default(true) but chat-event.handler.ts always creates with slaEnabled:false. Misleading default causes confusion. Change schema default to false + migration.","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:22:21.050163524+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:24:08.08747908+03:00","closed_at":"2026-02-11T21:24:08.08747908+03:00","close_reason":"Fixed: changed slaEnabled @default(true)→@default(false) in schema to match actual handler behavior + migration"}
{"id":"buh-9umz","title":"gh-88: Alert callback missing authorization check","description":"Score: 19 (sev=7, imp=7, lkh=5). Alert callback buttons (notify/resolve) don't verify user is authorized. Any admin chat member can click. Fix: verify user is accountant for the chat via isAccountantForChat(). File: alert-callback.handler.ts","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:54:34.336527393+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:05.627240396+03:00","closed_at":"2026-02-17T12:02:05.627241866+03:00","external_ref":"gh-88","dependencies":[{"issue_id":"buh-9umz","depends_on_id":"buh-wrhc","type":"blocks","created_at":"2026-02-17T11:55:00.158857162+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-a5k","title":"gh-105: No Admin Chat ID Validation","description":"GitHub Issue: #105 | Score: 19 (sev=7, imp=7, lkh=5)\nRoot Cause: TelegramAlertsService initializes without validating adminChatId\nSolution: Add validation in constructor, throw error if adminChatId invalid\nFiles: backend/src/services/telegram-alerts.ts:126-141\nExecutor: MAIN (simple validation)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:42.418311582+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:44:28.468294589+03:00","closed_at":"2026-02-17T09:44:28.468294589+03:00","close_reason":"Closed","external_ref":"gh-105","dependencies":[{"issue_id":"buh-a5k","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:42.419615145+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-a6u","title":"gh-98: Survey Response Missing Authorization","description":"GitHub Issue: #98 | Score: 15 (sev=7, imp=3, lkh=5)\nRoot Cause: Survey handler does not verify respondent is intended recipient\nSolution: Add ctx.from.id check against survey.chatId\nFiles: backend/src/bot/handlers/survey.handler.ts:67-120\nExecutor: general-purpose\nSimilar: gh-156 (closed as duplicate)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:00.424245052+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:28.1466618+03:00","closed_at":"2026-02-17T10:28:28.1466618+03:00","close_reason":"Added authorization check: verify callback chatId matches delivery chatId (gh-98)","external_ref":"gh-98","dependencies":[{"issue_id":"buh-a6u","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:00.425521329+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-a7u","title":"Fix: slaEnabled form default should be false, not true","description":"ChatSettingsForm DEFAULT_VALUES has slaEnabled: true which contradicts DB default (false). One line fix.","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T12:29:51.475708112+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T12:38:13.468413417+03:00","closed_at":"2026-02-12T12:38:13.468413417+03:00","close_reason":"Changed slaEnabled default from true to false"}
{"id":"buh-anf","title":"Fix: Logo image console warning (gh-56)","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:39:04.998265763+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:39:14.948170238+03:00","closed_at":"2026-02-14T17:39:14.948170238+03:00","close_reason":"Replaced Image width/height with fill prop in ThemeLogo","external_ref":"gh-56"}
{"id":"buh-awx","title":"gh-123: BigInt Serialization in Query Results","description":"GitHub Issue: #123 | Score: 15 (sev=5, imp=3, lkh=7)\nRoot Cause: BigInt values cannot be JSON.stringify'd for API responses\nSolution: Add BigInt serializer or convert to Number/String before response\nFiles: backend/src/services/sla/request.service.ts:271,336,423\nExecutor: general-purpose","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:18.611477374+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:36.873291263+03:00","closed_at":"2026-02-17T10:28:36.873291263+03:00","close_reason":"Added BigInt-safe JSON.stringify replacer in analytics dashboard cache and export (gh-123)","external_ref":"gh-123","dependencies":[{"issue_id":"buh-awx","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:18.612694124+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-b5a","title":"Investigate data bug gh-51","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:37:07.551008694+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:39:15.181382483+03:00","closed_at":"2026-02-14T17:39:15.181382483+03:00","close_reason":"Added no-data state to NPSWidget and TrendChart","external_ref":"gh-51"}
{"id":"buh-bbt","title":"Fix CI: outdated lockfile and formatting issues","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T22:06:54.47021316+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T22:08:51.828527193+03:00","closed_at":"2026-02-14T22:08:51.828527193+03:00","close_reason":"Fixed: updated pnpm-lock.yaml and ran Prettier on 17 files"}
{"id":"buh-bbz","title":"Auth check for messages.listByChat","description":"Add authorization: observers can only view messages in chats assigned to them. Chat is already fetched.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:50:38.789820407+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:52:34.780916295+03:00","closed_at":"2026-02-17T09:52:34.780916295+03:00","close_reason":"Closed"}
{"id":"buh-bct","title":"Add request history audit trail (gh-70)","description":"REOPENED: Replace manual requestHistory.create() calls with Prisma middleware. Current: manual logging at request.service.ts:128-146 and 219-237 (only tracks status). Need: Prisma middleware in prisma.ts that intercepts ALL ClientRequest updates, diffs changed fields, auto-logs to RequestHistory. Remove manual calls after middleware works.","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T19:36:45.592091987+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T11:07:55.238005104+03:00","closed_at":"2026-02-16T11:07:55.238005104+03:00","close_reason":"Prisma $extends audit trail with AsyncLocalStorage context. Tracks 6 fields (status, assignedTo, classification, classificationScore, slaBreached, respondedBy). All clientRequest.update calls automatically audited.","external_ref":"gh-70"}
{"id":"buh-bjw","title":"Add FAQ entry for Privacy Mode to docs/user-guide/faq-users.md","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:18:06.298650541+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:19:03.035739+03:00","closed_at":"2026-01-30T17:19:03.035739+03:00","close_reason":"Added FAQ entry for Privacy Mode"}
{"id":"buh-blk","title":"Validate SSL mode value in db/client.ts","description":"Reject weak SSL modes (allow, prefer) in production. Only accept require/verify-ca/verify-full","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:50:39.093315517+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:52:34.781979081+03:00","closed_at":"2026-02-17T09:52:34.781979081+03:00","close_reason":"Closed"}
{"id":"buh-bnq","title":"gh-106: URL Not Validated Before HTML Insertion","description":"GitHub Issue: #106 | Score: 10 (sev=5, imp=3, lkh=2)\nRoot Cause: No URL scheme validation (could be javascript: or data:)\nSolution: Validate URL scheme is http:// or https:// only\nFiles: backend/src/services/telegram-alerts.ts:248-251\nExecutor: MAIN","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:16.735360748+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:34.590862535+03:00","closed_at":"2026-02-17T11:45:34.590862535+03:00","close_reason":"Fixed: URL scheme validation (http/https only)","external_ref":"gh-106","dependencies":[{"issue_id":"buh-bnq","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:16.73704459+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-boct","title":"Create reusable requireChatAccess helper","description":"Extract repeated auth check pattern into a reusable helper to avoid copypaste in getById, getByIdWithMessages, messages.listByChat, requests.getById","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T10:02:45.138595+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:06:36.899804302+03:00","closed_at":"2026-02-17T10:06:36.899804302+03:00","close_reason":"Closed"}
{"id":"buh-brr","title":"Phase 5: Create frontend logs components (Table, Header, Filters, StatusBadge)","description":"Create LogsTable.tsx, LogsHeader.tsx, LogsFilters.tsx, StatusBadge.tsx components. Follow existing patterns from RequestsTable.tsx.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:44.188449266+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:29:56.44419224+03:00","closed_at":"2026-01-16T14:29:56.44419224+03:00","close_reason":"Frontend logs UI complete: 6 files created (4 components + 2 pages), type-check passed, follows BuhBot design patterns, integrated with tRPC router"}
{"id":"buh-cat","title":"Fix Jaeger volume permissions in deploy scripts","description":"Jaeger v1.54 runs as uid 10001 but Docker creates named volume buhbot-jaeger-data with root ownership. This causes 'mkdir /badger/key: permission denied' fatal error on every fresh deploy. Fix: add fix_volume_permissions step to both deploy.sh and github-deploy.sh that chowns the volume before starting services.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-16T19:58:46.306979852+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T19:58:56.533447212+03:00","closed_at":"2026-02-16T19:58:56.533447212+03:00","close_reason":"Added fix_volume_permissions to deploy.sh and github-deploy.sh; fixed VDS volume manually"}
{"id":"buh-chq","title":"HOTFIX: Configure SLA settings - set manager_telegram_ids and sla_threshold=15","description":"Root cause: manager_telegram_ids was empty [], sla_threshold was 60 instead of 15. Fixed via SQL: UPDATE global_settings SET global_manager_ids=['166848328'], default_sla_threshold=15; UPDATE chats SET sla_threshold_minutes=15, manager_telegram_ids=['166848328'] WHERE sla_enabled=true","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T15:59:40.995281559+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T15:59:47.159179014+03:00","closed_at":"2026-01-14T15:59:47.159179014+03:00","close_reason":"Fixed: Updated global_settings and all 4 chats with sla_enabled=true. SLA threshold set to 15 min, manager_telegram_ids set to [166848328]"}
{"id":"buh-cme","title":"gh-117: Off-By-One in Rate Limit Check","description":"GitHub Issue: #117 | Score: 18 (sev=5, imp=3, lkh=10)\nRoot Cause: Rate limit allows maxRequests + 1 before kicking in\nSolution: Fix comparison operator \u003e= to \u003e or adjust count\nFiles: backend/src/bot/middleware/rate-limit.ts:132\nExecutor: MAIN","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:57.232200891+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:27.07697777+03:00","closed_at":"2026-02-17T10:28:27.07697777+03:00","close_reason":"Fixed off-by-one: reordered pipeline (zadd before zcard), changed comparison to \u003e (gh-117)","external_ref":"gh-117","dependencies":[{"issue_id":"buh-cme","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:57.233402217+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-cp9","title":"Add VIP client handling (gh-76)","description":"REOPENED: ClientTier enum + TIER_THRESHOLDS in config.service.ts exist. getSlaThreshold() uses tier. Missing: priority routing logic. Need: 1) Sort request queue by tier (VIP first), 2) VIP indicators in frontend tables, 3) Senior accountant preference for VIP.","status":"closed","priority":3,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T20:04:40.534120637+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T11:08:00.463362909+03:00","closed_at":"2026-02-16T11:08:00.463362909+03:00","close_reason":"VIP priority sorting in getActiveRequests() by clientTier (premium \u003e vip \u003e standard \u003e basic). Crown badge in RequestsTable. clientTier added to list endpoint schema.","external_ref":"gh-76"}
{"id":"buh-csw","title":"Fix: SLA stats math 0+0≠1 + violations chart fractional Y-axis","description":"GitHub Issue #42. Root Cause A: analytics.slaCompliance counts answeredWithinSLA/breachedSLA only for requests with responseTimeMinutes!==null. Requests without response but slaBreached=true are NOT counted as breached. Fix: count null-response requests with slaBreached=true as breached. Root Cause B: YAxis in violations/page.tsx has no allowDecimals=false. Files: backend/src/api/trpc/routers/analytics.ts:98-108, frontend/src/app/violations/page.tsx:295-298","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:25:24.775042532+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:29:27.067069673+03:00","closed_at":"2026-02-12T13:29:27.067069673+03:00","close_reason":"Fixed: 1) Unanswered slaBreached requests counted as breached in analytics.slaCompliance, 2) allowDecimals=false on violations chart YAxis","external_ref":"gh-42"}
{"id":"buh-cz5","title":"Fix: analytics.ts uses wrong SLA field (slaResponseMinutes instead of slaThresholdMinutes)","description":"P0-2 from code review. analytics.ts lines 73,103,284,310,940,974 use slaResponseMinutes. All SLA compliance metrics, dashboard KPIs, exports are calculated against the wrong threshold. Must replace all 6 occurrences with slaThresholdMinutes.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:22:19.324656783+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:24:07.768016037+03:00","closed_at":"2026-02-11T21:24:07.768016037+03:00","close_reason":"Fixed: replaced all 8 occurrences of slaResponseMinutes→slaThresholdMinutes in analytics.ts (select blocks + calculations + exports)"}
{"id":"buh-d6f","title":"Fix: Dashboard activeAlertsCount query uses wrong filter — align with getActiveAlertCount","description":"Code review: getDashboard activeAlerts query (analytics.ts:460-464) uses deliveryStatus in ['pending','sent'] AND acknowledgedAt=null. But getActiveAlertCount (alert.ts:659) uses resolvedAction=null. Different conditions produce different counts, causing widget mismatch. Fix: align getDashboard to use resolvedAction=null.","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:51:14.769795233+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:57:17.848207296+03:00","closed_at":"2026-02-12T13:57:17.848207296+03:00","close_reason":"Aligned activeAlertsCount query with resolvedAction: null","external_ref":"review-alerts-query"}
{"id":"buh-ddc","title":"gh-103: Missing daysSince Parameter Validation","description":"GitHub Issue: #103 | Score: 7 (sev=5, imp=0, lkh=2)\nRoot Cause: No bounds validation on daysSince parameter\nSolution: Add validation: z.number().min(1).max(365)\nFiles: backend/src/services/classifier/feedback.processor.ts:257-260\nExecutor: MAIN","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:15.256408024+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:34.296930246+03:00","closed_at":"2026-02-17T11:45:34.296930246+03:00","close_reason":"Fixed: daysSince bounds validation 1-365","external_ref":"gh-103","dependencies":[{"issue_id":"buh-ddc","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:15.257422905+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-dex","title":"P1: Validate manager lists before alert creation","description":"alert.service.ts:133-164 - Alert created BEFORE checking for managers. Move validation before creation, add global fallback.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:17.240767346+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.850309561+03:00","closed_at":"2026-01-14T16:17:39.850309561+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-dg8","title":"Fix: Analytics page 'Action' label in English (gh-52)","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:07.717110474+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:33:42.983140741+03:00","closed_at":"2026-02-14T17:33:42.983140741+03:00","close_reason":"Fixed: ESLint errors resolved, type-check passed","external_ref":"gh-52"}
{"id":"buh-djk","title":"Fix: TypeScript any in test files (gh-58)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:11.486262875+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:33:42.990251993+03:00","closed_at":"2026-02-14T17:33:42.990251993+03:00","close_reason":"Fixed: ESLint errors resolved, type-check passed","external_ref":"gh-58"}
{"id":"buh-dvv","title":"DEV MODE: Prisma Connection Improvements","description":"Add longer connection timeout for development mode (15s vs 5s). Ensure env.ts is loaded first.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:12.2731938+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.619306466+03:00","closed_at":"2026-01-30T17:34:34.619306466+03:00","close_reason":"Implemented"}
{"id":"buh-e38","title":"Add regression tests T1-T3 from code review","description":"T1: test analytics uses slaThresholdMinutes. T2: test migration handler upsert no duplicates. T3: test notifyInChatOnBreach default=false","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:40:29.577625207+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:45:50.40670164+03:00","closed_at":"2026-02-11T21:45:50.40670164+03:00","close_reason":"Done: 6 regression tests added (T1-T3), all passing"}
{"id":"buh-e3p","title":"gh-101: TOCTOU in Survey Response Recording","description":"GitHub Issue: #101 | Score: 15 (sev=5, imp=3, lkh=7)\nRoot Cause: Multiple concurrent responses pass 'already responded' check\nSolution: Add unique constraint on (deliveryId) in database\nFiles: backend/src/services/feedback/survey.service.ts:388-403\nExecutor: database-architect","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:01.881514278+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:07.298511485+03:00","closed_at":"2026-02-17T11:21:07.298511485+03:00","close_reason":"Added re-fetch inside transaction to prevent TOCTOU; @unique on deliveryId provides DB-level dedup (gh-101)","external_ref":"gh-101","dependencies":[{"issue_id":"buh-e3p","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:01.882688716+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-e3p","depends_on_id":"buh-a6u","type":"blocks","created_at":"2026-02-17T09:12:24.613022967+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-e40","title":"Fix: notifyInChatOnBreach toggle not persisting (gh-37)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:42:44.199884989+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:44:38.267574289+03:00","closed_at":"2026-02-12T11:44:38.267574289+03:00","close_reason":"Fixed in commit f99b367","external_ref":"gh-37"}
{"id":"buh-e5z","title":"Security: Restrict PII in alerts API (gh-63)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:20.582051599+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:36:34.181116718+03:00","closed_at":"2026-02-14T17:36:34.181116718+03:00","close_reason":"Changed listUnacknowledged from authedProcedure to managerProcedure","external_ref":"gh-63"}
{"id":"buh-e84","title":"gh-132: Untrusted File Name Handling","description":"GitHub Issue: #132 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Untrusted file names used in logs/display without sanitization\nSolution: Sanitize file names before logging/display\nFiles: backend/src/bot/handlers/file.handler.ts:108\nExecutor: MAIN","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:38.443594734+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.677069483+03:00","closed_at":"2026-02-17T11:41:06.677069483+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-132","dependencies":[{"issue_id":"buh-e84","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:38.444859453+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-e92","title":"DEV MODE: Frontend LoginForm","description":"Add DEV MODE banner and auth bypass to LoginForm.tsx.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:19.606382593+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.031802071+03:00","closed_at":"2026-01-30T17:36:16.031802071+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-e92","depends_on_id":"buh-3wu","type":"blocks","created_at":"2026-01-30T17:32:33.60739866+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-eeh","title":"Fix code review findings from gh-69..gh-77","description":"Fix M1 (audit race condition comment), M2 (N+1 in FeedbackProcessor), M3 (getThread validation), m1 (unsafe any cast), m3 (ThreadTimeline error state), m4 (case-insensitive clientTier), console.error -\u003e logger in requests.ts","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-16T11:15:32.395726447+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T11:16:59.588125156+03:00","closed_at":"2026-02-16T11:16:59.588125156+03:00","close_reason":"Fixed all code review findings: M1 documented TOCTOU trade-off, M2 moved globalWordFrequency outside loop, m1 replaced any casts with type-safe accessor, m3 added error state to ThreadTimeline, m4 case-insensitive clientTier, console.error replaced with logger"}
{"id":"buh-eg8","title":"Fix: SLA breach alert silently fails when no managers configured","description":"Когда managerTelegramIds и globalManagerIds пусты, sla-timer.worker.ts создаёт alert со статусом failed и logger.error — никто не узнаёт о breach. Warning есть в ChatSettingsForm, но НЕТ в GeneralSettingsForm (предыдущий фикс buh-w1w был неполным). Фикс: добавить warning banner в GeneralSettingsForm","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:23.513288171+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:57.5010709+03:00","closed_at":"2026-02-11T20:25:57.5010709+03:00","close_reason":"Fixed: added warning banner in GeneralSettingsForm when globalManagerIds is empty","external_ref":"gh-34"}
{"id":"buh-el4","title":"gh-134: Missing Cascade Delete on Chat.assignedAccountantId","description":"GitHub Issue: #134 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: No onDelete cascade on Chat.assignedAccountantId relation\nSolution: Add onDelete: SetNull to Prisma schema\nFiles: backend/prisma/schema.prisma:224-238\nExecutor: database-architect\nSimilar: gh-167 (closed as duplicate)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:39.374448436+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.678113342+03:00","closed_at":"2026-02-17T11:41:06.678113342+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-134","dependencies":[{"issue_id":"buh-el4","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:39.375503791+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-el4","depends_on_id":"buh-63c","type":"blocks","created_at":"2026-02-17T09:12:22.921843705+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-ev1","title":"gh-126: SSL Not Enforced in Production","description":"GitHub Issue: #126 | Score: 19 (sev=7, imp=7, lkh=5)\nRoot Cause: Database connection warns but doesn't prevent non-SSL in prod\nSolution: Enforce SSL in production mode, reject non-SSL connections\nFiles: backend/src/db/client.ts:50-59\nExecutor: MAIN (config fix)\nRelated: gh-127 (TLS verification disabled in dev)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:43.457865689+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:44:28.469422173+03:00","closed_at":"2026-02-17T09:44:28.469422173+03:00","close_reason":"Closed","external_ref":"gh-126","dependencies":[{"issue_id":"buh-ev1","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:43.459048801+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-ewv","title":"Fix frontend package-lock.json sync for Docker build","description":"CI fails on Build Docker Images job: npm ci in frontend Dockerfile fails with 'Missing: magicast@0.3.5 from lock file'. The package-lock.json is out of sync with package.json. Fix: run npm install in frontend/ to regenerate lock file.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-16T19:04:27.77641792+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T19:07:01.862572185+03:00","closed_at":"2026-02-16T19:07:01.862572185+03:00","close_reason":"Fixed: prettier --write on 7 files + npm install to sync package-lock.json"}
{"id":"buh-f92g","title":"Fix code review findings for P2 batch","description":"8 findings from code-review-p2-batch-fixes.md: queryRawUnsafe→queryRaw, tx timeout, Set for telegramIds, thread orphan handling, lock release logging, alert re-fetch, survey P2002, escalation error narrowing","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:28:34.218426354+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:34:42.567790039+03:00","closed_at":"2026-02-17T11:34:42.567790039+03:00","close_reason":"All 8 code review findings fixed: queryRaw, tx timeout, Set dedup, thread orphan, lock logging, alert TOCTOU, P2002 catch, BullMQ error matching"}
{"id":"buh-fb5","title":"Complete accountant field migration (gh-72)","description":"Remove legacy accountantUsername field from Chat model. Migrate data to accountantUsernames array. Drop column via migration. Clean up all references.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T20:04:35.703084768+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T20:14:06.547685783+03:00","closed_at":"2026-02-14T20:14:06.547685783+03:00","close_reason":"Removed legacy accountantUsername from DB schema, migrated data to array, updated all handlers/routers/tests","external_ref":"gh-72"}
{"id":"buh-fil","title":"Process GitHub Issues Batch 2026-02-17","description":"Batch processing of 50 open GitHub issues. P1: 7, P2: 28, P3: 14, P4: 1","status":"closed","priority":2,"issue_type":"epic","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:06.194607142+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:51:34.46051382+03:00","closed_at":"2026-02-17T11:51:34.46051382+03:00","close_reason":"All children closed or deferred. Batch complete."}
{"id":"buh-fj5","title":"Unify configuration management (gh-74)","description":"REOPENED: ConfigService fully implemented at backend/src/config/config.service.ts. Missing: Admin Settings UI page. Need: frontend/src/app/admin/settings page with forms for Working Hours, SLA, Manager Alerts, AI Classification, Data Retention, Survey, Bot groups. Use existing tRPC settings router. Tech: Next.js App Router, shadcn/ui, Tailwind CSS 4.","status":"closed","priority":3,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T20:04:38.340561032+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T11:00:33.517947708+03:00","closed_at":"2026-02-16T11:00:33.517947708+03:00","close_reason":"Implemented AI Classification and Data Retention tabs in Settings page","external_ref":"gh-74"}
{"id":"buh-fkt","title":"Fix: Frontend displays wrong SLA field (slaResponseMinutes vs slaThresholdMinutes)","description":"Frontend показывает slaResponseMinutes, а backend использует slaThresholdMinutes для breach detection. tRPC router никогда не возвращает slaThresholdMinutes. Фикс: заменить slaResponseMinutes→slaThresholdMinutes в tRPC output schemas, select блоках, и всех frontend компонентах","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:19.01999254+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:57.255599877+03:00","closed_at":"2026-02-11T20:25:57.255599877+03:00","close_reason":"Fixed: replaced slaResponseMinutes→slaThresholdMinutes in tRPC output schemas, Prisma select blocks, all frontend components","external_ref":"gh-33"}
{"id":"buh-fm6","title":"gh-107: No Idempotency Protection in Alert Worker","description":"GitHub Issue: #107 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: No idempotency key prevents duplicate processing on retry\nSolution: Add idempotency check based on alertId before processing\nFiles: backend/src/queues/alert.worker.ts:95-255\nExecutor: sla-backend-specialist","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:36.62413144+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:07.592102699+03:00","closed_at":"2026-02-17T11:21:07.592102699+03:00","close_reason":"Added idempotency check: skip if deliveryStatus=delivered before sending (gh-107)","external_ref":"gh-107","dependencies":[{"issue_id":"buh-fm6","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:36.625343312+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-fm6","depends_on_id":"buh-34f","type":"blocks","created_at":"2026-02-17T09:12:23.769929901+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-g4l","title":"Implement request deduplication (gh-66)","description":"Add dedup logic to message.handler.ts: hash message text, check for similar hash in same chat within 5-min window. Add contentHash/relatedRequestId fields to ClientRequest. Migration needed.","status":"closed","priority":1,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T19:36:39.423153368+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T19:44:24.740427926+03:00","closed_at":"2026-02-14T19:44:24.740427926+03:00","close_reason":"Implemented request deduplication (gh-66): added contentHash + relatedRequestId to ClientRequest schema, SHA-256 hash of normalized text, 5-min window dedup check in message.handler.ts, migration 20260214000000","external_ref":"gh-66"}
{"id":"buh-g7p","title":"Fix: Duplicate chat entries during group-to-supergroup migration","description":"chat-event.handler.ts:169 использует prisma.chat.create() вместо upsert(). При миграции group→supergroup my_chat_member создаёт запись первым, затем migrate_to_chat_id падает с Unique constraint. Фикс: заменить create на upsert, пометить старый чат [MIGRATED]","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:16.242065542+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:57.010225155+03:00","closed_at":"2026-02-11T20:25:57.010225155+03:00","close_reason":"Fixed: replaced create() with upsert() in migrate_to_chat_id handler, old chat marked [MIGRATED]","external_ref":"gh-32"}
{"id":"buh-ga4","title":"Add classifier feedback loop (gh-73)","description":"REOPENED: ClassificationCorrection write-only. Need: 1) feedback.processor.ts to analyze correction patterns, 2) BullMQ scheduled job for periodic processing, 3) Update keyword rules/prompt based on patterns, 4) getClassificationStats endpoint. Create: backend/src/services/classifier/feedback.processor.ts","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T20:04:37.299097959+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-16T11:07:57.974661054+03:00","closed_at":"2026-02-16T11:07:57.974661054+03:00","close_reason":"FeedbackProcessor class with pattern analysis, TF-IDF keyword extraction, Russian stop words, misclassification rates. tRPC getClassificationFeedback endpoint.","external_ref":"gh-73"}
{"id":"buh-gma","title":"Code review: SLA/alert system","description":"Провести код-ревью SLA/alert системы: alert.worker.ts, sla-timer.worker.ts, message.handler.ts. Проверить на баги, best practices, улучшения.","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:07:58.777748986+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.857514217+03:00","closed_at":"2026-01-14T16:17:39.857514217+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-gn1","title":"gh-131: Settings Cache Thundering Herd","description":"GitHub Issue: #131 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Multiple concurrent requests trigger simultaneous cache rebuilds\nSolution: Implement lock/mutex for cache refresh (e.g., singleflight pattern)\nFiles: backend/src/services/classifier/classifier.service.ts:74-126\nExecutor: general-purpose","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:25.864355901+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.675961555+03:00","closed_at":"2026-02-17T11:41:06.675961555+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-131","dependencies":[{"issue_id":"buh-gn1","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:25.865715738+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-gn4","title":"Fix ClassifierService ignores aiConfidenceThreshold","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:13.261336077+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.75916173+03:00","closed_at":"2026-01-30T13:09:12.75916173+03:00","close_reason":"Fixed all bugs, type-check and build passed"}
{"id":"buh-gvw","title":"DEV MODE: docker-compose.local.yml","description":"Create infrastructure/docker-compose.local.yml with postgres and redis services for local development.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:21.922352333+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.632638781+03:00","closed_at":"2026-01-30T17:34:34.632638781+03:00","close_reason":"Implemented"}
{"id":"buh-gzs","title":"gh-125: Incomplete Terminal State Check in SLA Timer","description":"GitHub Issue: #125 | Score: 15 (sev=5, imp=3, lkh=7)\nRoot Cause: SLA timer only checks 'answered' status, missing other terminal states\nSolution: Add all terminal states (answered, closed, cancelled, etc.)\nFiles: backend/src/queues/sla-timer.worker.ts:63-72\nExecutor: sla-backend-specialist","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:19.910240148+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:27.617965041+03:00","closed_at":"2026-02-17T10:28:27.617965041+03:00","close_reason":"Added 'closed' to terminal states check in SLA timer and escalation service (gh-125)","external_ref":"gh-125","dependencies":[{"issue_id":"buh-gzs","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:19.911501022+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-h7k","title":"gh-118: Missing Template ID Validation","description":"GitHub Issue: #118 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Template IDs passed directly to DB without format validation\nSolution: Add UUID validation before database query\nFiles: backend/src/bot/handlers/template.handler.ts:225-233\nExecutor: MAIN","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:08.100614157+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:17.856739844+03:00","closed_at":"2026-02-17T11:21:17.856739844+03:00","close_reason":"Added UUID regex validation before DB query in getTemplateById (gh-118)","external_ref":"gh-118","dependencies":[{"issue_id":"buh-h7k","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:08.101761948+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-hfqn","title":"Audit authedProcedure endpoints for missing auth","description":"Check all authedProcedure endpoints across all routers. Known affected: requests.getHistory, requests.getThread","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T10:02:45.692562858+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:06:36.9020743+03:00","closed_at":"2026-02-17T10:06:36.9020743+03:00","close_reason":"Closed"}
{"id":"buh-hg4","title":"Fix: Admin footer version out of sync with Release Please (gh-39)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:42:45.299098505+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:44:38.27225796+03:00","closed_at":"2026-02-12T11:44:38.27225796+03:00","close_reason":"Fixed in commit f99b367","external_ref":"gh-39"}
{"id":"buh-hj1","title":"gh-100: Race Condition in Escalation Scheduling","description":"GitHub Issue: #100 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: No distributed locking in escalation jobs\nSolution: Use BullMQ job deduplication or Redis lock\nFiles: backend/src/services/alerts/escalation.service.ts:84-206\nExecutor: sla-backend-specialist","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:34.049717083+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:37.958778806+03:00","closed_at":"2026-02-17T10:28:37.958778806+03:00","close_reason":"Added try-catch for BullMQ duplicate job ID handling in escalation scheduling (gh-100)","external_ref":"gh-100","dependencies":[{"issue_id":"buh-hj1","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:34.050966214+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-hsv","title":"Replace native date input with shadcn/ui DatePicker in HolidayCalendar","description":"Code review: lang=ru on \u003cinput type=date\u003e is browser-dependent. Replace with shadcn/ui Calendar/DatePicker for consistent dd.mm.yyyy across browsers. File: frontend/src/components/settings/HolidayCalendar.tsx. No existing calendar/datepicker UI component found in project — need to install shadcn calendar first.","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:51:09.693186576+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:57:18.091906264+03:00","closed_at":"2026-02-12T13:57:18.091906264+03:00","close_reason":"Replaced native date input with shadcn/ui DatePicker with ru locale","external_ref":"review-datepicker"}
{"id":"buh-hzd","title":"P0: Fix race condition in alert delivery status updates","description":"alert.worker.ts:203-223 - Two separate DB updates for same alert. If crash between updates, alert stuck in 'sent' state. Fix: collect all message IDs, single atomic update at end.","status":"closed","priority":0,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:15.093742536+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.833742308+03:00","closed_at":"2026-01-14T16:15:17.833742308+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-i4s","title":"Fix: Minor UI/UX — dashboard alert count, date picker locale, table truncation, TG widget","description":"GitHub Issue #43. 4 sub-issues: A) Dashboard 'Активные алерты' shows 0 but lists 1 alert — count uses activeAlertsCount (resolvedAction=null) but list shows breached requests. B) Holiday date picker shows mm/dd/yyyy instead of dd.mm.yyyy. C) /alerts and /logs table ДЕЙСТВИЯ column truncated. D) Settings Telegram widget shows 'Bot domain invalid' in dev mode — should be hidden or show explanation. Files: frontend/src/app/dashboard/dashboard-content.tsx, frontend/src/app/settings/**","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:25:29.618182038+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:29:27.294088129+03:00","closed_at":"2026-02-12T13:29:27.294088129+03:00","close_reason":"Fixed: A) Dashboard alert count uses Math.max(activeAlertsCount, breachedRequests.length), B) Date input lang=ru + placeholder, C) min-w-[120px] whitespace-nowrap on ДЕЙСТВИЯ columns, D) isDevMode check hides TG widget","external_ref":"gh-43"}
{"id":"buh-j0mz","title":"Audit bot commands for info disclosure","description":"Grep all bot.command handlers for any data leakage to end users","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T10:02:46.255631092+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:06:36.904443534+03:00","closed_at":"2026-02-17T10:06:36.904443534+03:00","close_reason":"Closed"}
{"id":"buh-j1p","title":"gh-166: Sanitize Chat Titles","description":"GitHub Issue: #166 | Score: 10 (sev=2, imp=3, lkh=5)\nRoot Cause: Chat titles not sanitized before display\nSolution: Sanitize chat titles (trim, strip HTML, limit length)\nFiles: backend/src/bot/handlers/chat-event.handler.ts:126\nExecutor: MAIN\nRelated: buh-scf (gh-120 same file)","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:52.409735796+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:48.259958673+03:00","closed_at":"2026-02-17T11:45:48.259958673+03:00","close_reason":"Already fixed by buh-scf: sanitizeChatTitle in chat-event.handler","external_ref":"gh-166","dependencies":[{"issue_id":"buh-j1p","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:52.410926526+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-j1p","depends_on_id":"buh-scf","type":"blocks","created_at":"2026-02-17T09:12:22.35718312+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-j9d","title":"gh-164: Missing Production Guard for DEV_MODE","description":"GitHub Issue: #164 | Score: 10 (sev=2, imp=3, lkh=5)\nRoot Cause: DEV_MODE can be enabled in production without guard\nSolution: Add NODE_ENV check to prevent DEV_MODE in production\nFiles: backend/src/api/trpc/context.ts:42\nExecutor: MAIN\nSimilar: gh-149 (closed as duplicate)","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:51.017876075+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:47.955651167+03:00","closed_at":"2026-02-17T11:45:47.955651167+03:00","close_reason":"Already fixed: isDevMode checks NODE_ENV=development","external_ref":"gh-164","dependencies":[{"issue_id":"buh-j9d","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:51.019053361+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-jbn","title":"Fix mock paths in response.handler.test.ts","description":"vi.mock() uses alias paths (@/lib/prisma.js) but handler imports use relative paths (../../lib/prisma.js). Mocks don't intercept.","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-04T14:50:41.919596456+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-04T14:52:19.804143723+03:00","closed_at":"2026-02-04T14:52:19.804143723+03:00","close_reason":"Fixed: changed vi.mock() alias paths to relative paths matching handler imports. 34/34 tests pass, 83/83 full suite.","external_ref":"gh-29"}
{"id":"buh-jk2","title":"Fix: Landing footer shows 2025 AIDevTeam (gh-53)","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:10.012399379+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:33:42.988383409+03:00","closed_at":"2026-02-14T17:33:42.988383409+03:00","close_reason":"Fixed: ESLint errors resolved, type-check passed","external_ref":"gh-53"}
{"id":"buh-jo3","title":"Add warning in UI when manager_telegram_ids is empty","description":"UI позволяет сохранять чат без manager_telegram_ids, что делает уведомления невозможными. Добавить warning в frontend/src/app/chats/[id]/page.tsx","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:05:43.671455481+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.827969707+03:00","closed_at":"2026-01-14T16:17:39.827969707+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-joq","title":"gh-137: Redis Unlimited Retries Can Cause Hangs","description":"GitHub Issue: #137 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: maxRetriesPerRequest set to null causes indefinite hangs\nSolution: Set reasonable maxRetriesPerRequest (e.g., 3)\nFiles: backend/src/lib/redis.ts:46\nExecutor: MAIN\nSimilar: gh-129 (closed as duplicate)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:40.764622409+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.679211826+03:00","closed_at":"2026-02-17T11:41:06.679211826+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-137","dependencies":[{"issue_id":"buh-joq","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:40.765858733+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-k5a","title":"Notify all accountants from accountantUsernames array","description":"## Context\n- Currently only assignedAccountant receives DM notification\n- accountantUsernames array may contain multiple accountants\n- Need to notify ALL accountants, not just the assigned one\n\n## Requirements\n1. In alert-callback.handler.ts, collect all accountant telegram_ids:\n   - assignedAccountant.telegramId (primary)\n   - For each username in accountantUsernames, lookup in users table by telegramUsername\n2. Send notification to ALL found telegram_ids (not just one)\n3. Fallback to group mention if no telegram_ids found\n\n## Files to modify\n- backend/src/bot/handlers/alert-callback.handler.ts\n\n## DB Query needed\nSELECT telegram_id FROM users WHERE telegram_username IN (accountantUsernames)\n\n## Edge cases\n- Duplicate: assignedAccountant might also be in accountantUsernames - dedupe\n- Not found: username in array but no matching user - skip silently\n- All fail: fallback to group mention","status":"closed","priority":1,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:40:42.051395191+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:49:01.615871195+03:00","closed_at":"2026-01-14T16:49:01.615871195+03:00","close_reason":"Implemented and deployed"}
{"id":"buh-k9r","title":"DEV MODE: Supabase Client Non-Nullable","description":"Modify supabase.ts to use placeholder values in DEV MODE instead of throwing errors. Keep client non-nullable.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:10.070782155+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.016877487+03:00","closed_at":"2026-01-30T17:36:16.016877487+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-k9r","depends_on_id":"buh-0sl","type":"blocks","created_at":"2026-01-30T17:32:33.04821059+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-kae","title":"gh-104: Rating Not Validated in Survey Response","description":"GitHub Issue: #104 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Rating value not validated to 1-5 range before save\nSolution: Add Zod validation z.number().min(1).max(5) on rating\nFiles: backend/src/services/feedback/survey.service.ts:405-415\nExecutor: MAIN","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:35.600761573+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.670408279+03:00","closed_at":"2026-02-17T11:41:06.670408279+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-104","dependencies":[{"issue_id":"buh-kae","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:35.602081022+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-kae","depends_on_id":"buh-e3p","type":"blocks","created_at":"2026-02-17T09:12:24.333169365+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-kjj","title":"gh-151: In-Memory Comment Collection Map Not Cleaned","description":"GitHub Issue: #151 | Score: 10 (sev=2, imp=3, lkh=5)\nRoot Cause: awaitingComment Map not cleaned on server restart\nSolution: Add cleanup logic or use Redis for state\nFiles: backend/src/bot/handlers/survey.handler.ts:42,134-140\nExecutor: MAIN","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:31.576606415+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:34.878140938+03:00","closed_at":"2026-02-17T11:45:34.878140938+03:00","close_reason":"Fixed: cap awaitingComment Map at 1000 entries","external_ref":"gh-151","dependencies":[{"issue_id":"buh-kjj","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:31.57764193+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-kjn","title":"Security: Add CORS middleware to Express (gh-61)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:17.817703666+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:36:33.715760312+03:00","closed_at":"2026-02-14T17:36:33.715760312+03:00","close_reason":"Added cors middleware with origin restrictions","external_ref":"gh-61"}
{"id":"buh-kmk","title":"Investigate data bug gh-48","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:37:06.86622685+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:52:02.434920017+03:00","closed_at":"2026-02-14T17:52:02.434920017+03:00","close_reason":"Fixed: Dashboard alertsData now uses only activeAlertsCount from SlaAlert table, consistent with Alerts page. Removed Math.max fabrication from breached requests.","external_ref":"gh-48"}
{"id":"buh-l8q","title":"Fix BigInt serialization in logger","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:05.524518456+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:04:56.454490145+03:00","closed_at":"2026-01-30T13:04:56.454490145+03:00","close_reason":"Fixed BigInt serialization in logger"}
{"id":"buh-mfp","title":"Chore: document slaResponseMinutes dual-field sync in settings.ts","description":"P1-1 from code review. settings.ts line 668 updates both slaThresholdMinutes and slaResponseMinutes without explanation. Add comment documenting why both fields are kept in sync (backward compat until deprecation).","status":"closed","priority":3,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:22:22.980762853+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:24:08.390771586+03:00","closed_at":"2026-02-11T21:24:08.390771586+03:00","close_reason":"Fixed: added comment to settings.ts explaining legacy field sync"}
{"id":"buh-mg0v","title":"Add auth to /version bot command","description":"Restrict /version to admin users or remove it to prevent version fingerprinting","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T10:02:44.844495075+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:06:36.898428297+03:00","closed_at":"2026-02-17T10:06:36.898428297+03:00","close_reason":"Closed"}
{"id":"buh-mgs","title":"Phase 4: Create frontend logs pages (main + detail)","description":"Create /logs/page.tsx (main list page) and /logs/[id]/page.tsx (detail page). Use AdminLayout, tRPC queries, and table components.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:42.628678792+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:29:56.438322317+03:00","closed_at":"2026-01-16T14:29:56.438322317+03:00","close_reason":"Frontend logs UI complete: 6 files created (4 components + 2 pages), type-check passed, follows BuhBot design patterns, integrated with tRPC router"}
{"id":"buh-mj2","title":"gh-122: Quarter Format Not Validated","description":"GitHub Issue: #122 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Quarter format not validated, invalid formats accepted\nSolution: Add regex validation for quarter format (e.g., Q1-2026)\nFiles: backend/src/services/feedback/survey.service.ts:86-101\nExecutor: MAIN","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:21.959955809+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:41:06.672757936+03:00","closed_at":"2026-02-17T11:41:06.672757936+03:00","close_reason":"Fixed in commit 0c0ba83","external_ref":"gh-122","dependencies":[{"issue_id":"buh-mj2","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:21.961404451+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-mpj","title":"Fix notifyInChatOnBreach not set on chat creation (gh-17)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T16:14:50.186535448+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T16:14:56.722879823+03:00","closed_at":"2026-01-30T16:14:56.722879823+03:00","close_reason":"Fixed: Added notifyInChatOnBreach: true to registerChat create block, migration to update existing chats, tests added","external_ref":"gh-17"}
{"id":"buh-mym","title":"Fix hardcoded min(15) in SLA validation","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:14.308506073+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.767044082+03:00","closed_at":"2026-01-30T13:09:12.767044082+03:00","close_reason":"Fixed all bugs, type-check and build passed"}
{"id":"buh-n4m","title":"Add backend integration tests for chats.update mutation","description":"Code review found zero test coverage for chats.update mutation. Need tests for: 1) SLA enable transition with/without managers, 2) notifyInChatOnBreach persistence, 3) partial updates with undefined fields, 4) SLA already enabled with removed managers. File: backend/src/api/trpc/routers/__tests__/chats.test.ts","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:51:00.487394546+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:54:27.565252436+03:00","closed_at":"2026-02-12T11:54:27.565252436+03:00","close_reason":"Added 8 new tests for chats.update mutation"}
{"id":"buh-nao","title":"DEV MODE: Frontend .env.example Update","description":"Add NEXT_PUBLIC_DEV_MODE entry to frontend/.env.example.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:20.976682957+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.612648825+03:00","closed_at":"2026-01-30T17:34:34.612648825+03:00","close_reason":"Implemented"}
{"id":"buh-nhg","title":"Update README.md prerequisites with Privacy Mode warning","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:18:07.722187876+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:19:20.227839396+03:00","closed_at":"2026-01-30T17:19:20.227839396+03:00","close_reason":"Updated README prerequisites with Privacy Mode warning"}
{"id":"buh-o5fn","title":"gh-91: Alert created but not delivered on queue failure","description":"Score: 14 (sev=7, imp=5, lkh=2). If queueAlert throws after DB create, alert never delivered. Reconciliation job exists but doesn't specifically handle this. Fix: catch queueAlert error and set delivery status for retry. File: alert.service.ts","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:54:38.458800681+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:06.452056231+03:00","closed_at":"2026-02-17T12:02:06.45205785+03:00","external_ref":"gh-91","dependencies":[{"issue_id":"buh-o5fn","depends_on_id":"buh-wrhc","type":"blocks","created_at":"2026-02-17T11:55:01.023971528+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-oyj","title":"Phase 1: Add ErrorLog Prisma model and migration","description":"Add ErrorLog model with ErrorStatus enum to Prisma schema. Include RLS policies for admin-only access. Generate and apply migration.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:36.343649533+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:04:24.438053488+03:00","closed_at":"2026-01-16T14:04:24.438053488+03:00","close_reason":"ErrorLog Prisma model added with ErrorStatus enum, migration 20260116000000_add_error_logs created and applied, RLS policies implemented, User model updated with assignedErrors relation"}
{"id":"buh-phi","title":"Fix: Add logger.warn when SLA enabled without managers + defensive ?? false for notifyInChatOnBreach","description":"Code review found: 1) SLA validation skips manager check when SLA already enabled. Add logger.warn for monitoring. 2) notifyInChatOnBreach should use ?? false as defensive fallback. Files: backend/src/api/trpc/routers/chats.ts, frontend/src/components/chats/ChatSettingsForm.tsx","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:50:59.005912641+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:54:26.900795217+03:00","closed_at":"2026-02-12T11:54:26.900795217+03:00","close_reason":"Added logger.warn for SLA without managers + ?? false fallback for notifyInChatOnBreach"}
{"id":"buh-qgo","title":"Fix Redis eviction policy for BullMQ","description":"Redis настроен с allkeys-lru, должен быть noeviction для BullMQ. Файл: infrastructure/docker-compose.yml","status":"closed","priority":3,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:05:45.830142822+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.854116079+03:00","closed_at":"2026-01-14T16:15:17.854116079+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-qprp","title":"gh-93: Data retention deletes not atomic","description":"Score: 12 (sev=5, imp=2, lkh=5). Sequential deleteMany without transaction. Partially mitigated by onDelete CASCADE on SlaAlert.request. Fix: wrap in prisma transaction. File: data-retention.job.ts","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:54:51.34707012+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:07.016156843+03:00","closed_at":"2026-02-17T12:02:07.016158412+03:00","external_ref":"gh-93","dependencies":[{"issue_id":"buh-qprp","depends_on_id":"buh-wrhc","type":"blocks","created_at":"2026-02-17T11:55:01.612745072+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-qtj","title":"Investigate data bug gh-55","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:37:08.004703656+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:52:04.546672881+03:00","closed_at":"2026-02-14T17:52:04.546672881+03:00","close_reason":"Fixed: Message handler now auto-registers unregistered chats via upsert (slaEnabled=false by default). Ensures chats appear in admin panel even if my_chat_member event was missed.","external_ref":"gh-55"}
{"id":"buh-r5j","title":"Fix Release Please workflow (gh-26, gh-27, gh-28)","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-04T12:45:10.005073347+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-04T12:52:26.903954443+03:00","closed_at":"2026-02-04T12:52:26.903954443+03:00","close_reason":"Fixed: enabled GH Actions PR permission, synced local main, verified workflow (run #21643796447 succeeded, PR #30 created), closed issues #26, #27, #28","external_ref":"gh-26"}
{"id":"buh-r97","title":"Global SLA threshold should update existing chats (gh-16)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T16:14:51.637753302+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T16:14:58.480402397+03:00","closed_at":"2026-01-30T16:14:58.480402397+03:00","close_reason":"Fixed: updateSlaThresholds now updates all existing chats via chat.updateMany(), returns updatedChats count, tests added","external_ref":"gh-16"}
{"id":"buh-rbc","title":"gh-116: Response Resolution Race Condition","description":"GitHub Issue: #116 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Non-atomic find-then-update causes double SLA timer resolution\nSolution: Use atomic updateMany with status check in WHERE clause\nFiles: backend/src/bot/handlers/response.handler.ts:354-370\nExecutor: sla-backend-specialist","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:10:06.827728915+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:17.5579864+03:00","closed_at":"2026-02-17T11:21:17.5579864+03:00","close_reason":"Added atomic claim via updateMany with status check before stopSlaTimer (gh-116)","external_ref":"gh-116","dependencies":[{"issue_id":"buh-rbc","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:10:06.828851825+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-rps","title":"Fix: Resolve alert HTTP 500 — FK violation + unsafe messageText","description":"GitHub Issue #44. Root Cause: resolveAlertService sets acknowledgedBy=userId (FK to User). In DEV_MODE userId='aaaaaaaa-...' may not exist in DB → P2003. Also: messageText.substring(0,200) crashes on null. Also: cancelEscalation failure blocks resolve. Files: backend/src/api/trpc/routers/alert.ts:220,295-353, backend/src/services/alerts/alert.service.ts:225-232, backend/src/services/alerts/escalation.service.ts","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:25:23.400886101+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:29:26.839189814+03:00","closed_at":"2026-02-12T13:29:26.839189814+03:00","close_reason":"Fixed: 1) Safe messageText access with ?? '', 2) cancelEscalation wrapped in try/catch (non-blocking), 3) User existence check before FK write","external_ref":"gh-44"}
{"id":"buh-s1g","title":"gh-108: Potential Infinite Loop in Data Retention Job","description":"GitHub Issue: #108 | Score: 20 (sev=7, imp=3, lkh=10)\nRoot Cause: Break statement in wrong place in do-while loop - only deletes first batch\nSolution: Remove incorrect break, ensure loop continues until batchDeleted is 0\nFiles: backend/src/jobs/data-retention.job.ts:169-190\nExecutor: MAIN (simple fix)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:27.47952053+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:44:28.4660384+03:00","closed_at":"2026-02-17T09:44:28.4660384+03:00","close_reason":"Closed","external_ref":"gh-108","dependencies":[{"issue_id":"buh-s1g","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:27.480792816+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-scf","title":"gh-120: Missing Chat Title Sanitization","description":"GitHub Issue: #120 | Score: 15 (sev=5, imp=3, lkh=7)\nRoot Cause: Chat titles stored without length/character validation\nSolution: Trim and sanitize chat titles before storage\nFiles: backend/src/bot/handlers/chat-event.handler.ts:126-133\nExecutor: MAIN\nRelated: gh-166 (LOW duplicate)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:17.042444425+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:27.881554486+03:00","closed_at":"2026-02-17T10:28:27.881554486+03:00","close_reason":"Added sanitizeChatTitle helper: trim, strip control chars, limit 255 chars (gh-120)","external_ref":"gh-120","dependencies":[{"issue_id":"buh-scf","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:17.043645743+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-tqr","title":"Auth check for chats.getByIdWithMessages","description":"Apply same authorization check as getById: observers can only view chats assigned to them","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:50:38.154874291+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:52:34.778345163+03:00","closed_at":"2026-02-17T09:52:34.778345163+03:00","close_reason":"Closed"}
{"id":"buh-uas","title":"Investigate data bug gh-54","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:37:07.779213939+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:52:03.677068402+03:00","closed_at":"2026-02-14T17:52:03.677068402+03:00","close_reason":"Fixed: Initialize isAuthorized from isDevMode to prevent false→true flicker on navigation. Added staleTime=25s to alert count query.","external_ref":"gh-54"}
{"id":"buh-uo4","title":"Enhance accountant verification by Telegram ID (gh-68)","description":"Check 3 already verifies telegramId for single assignedAccountant. Problem: accountantUsernames array uses username-only matching. Need to add telegramId-based matching for multi-accountant chats. Consider adding accountant_telegram_ids BigInt[] field to Chat model.","status":"closed","priority":1,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T19:36:43.32381666+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T19:48:29.784599635+03:00","closed_at":"2026-02-14T19:48:29.784599635+03:00","close_reason":"Enhanced accountant verification (gh-68): added accountantTelegramIds BigInt[] to Chat model, reordered checks to prioritize ID-based over username-based, auto-populate IDs in update mutation, updated tests","external_ref":"gh-68"}
{"id":"buh-v0l","title":"gh-111: Race Condition in Chat Update","description":"GitHub Issue: #111 | Score: 13 (sev=5, imp=3, lkh=5)\nRoot Cause: Concurrent update requests cause inconsistent state\nSolution: Use Prisma optimistic locking or transaction\nFiles: backend/src/api/trpc/routers/chats.ts:340-500\nExecutor: fullstack-nextjs-specialist","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:52.07619138+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:21:08.571046732+03:00","closed_at":"2026-02-17T11:21:08.571046732+03:00","close_reason":"Wrapped updateSettings in  with SELECT FOR UPDATE row-level lock (gh-111)","external_ref":"gh-111","dependencies":[{"issue_id":"buh-v0l","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:52.077382325+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-v56","title":"Investigate data bug gh-47","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:37:06.633010046+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:45:25.973065985+03:00","closed_at":"2026-02-14T17:45:25.973065985+03:00","close_reason":"Fixed: compliance calc now uses classified-only denominator (answered+breached), matching slaCompliance query. Fixed in analytics.ts getDashboard and accountantStats.","external_ref":"gh-47"}
{"id":"buh-v7i","title":"Investigate data bug gh-49","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:37:07.097849694+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:41:42.405928984+03:00","closed_at":"2026-02-14T17:41:42.405928984+03:00","close_reason":"Unified request status types: replaced resolved/violated with answered/escalated from Prisma schema across all components","external_ref":"gh-49"}
{"id":"buh-vlw","title":"gh-153: Missing Cascade Delete on ClientRequest.assignedTo","description":"GitHub Issue: #153 | Score: 10 (sev=2, imp=3, lkh=5)\nRoot Cause: No onDelete action on ClientRequest.assignedTo relation\nSolution: Add onDelete: SetNull to Prisma schema\nFiles: backend/prisma/schema.prisma:261\nExecutor: database-architect","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:35.005272353+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:49.140318369+03:00","closed_at":"2026-02-17T11:45:49.140318369+03:00","close_reason":"Fixed: onDelete SetNull on ClientRequest.assignedTo + migration","external_ref":"gh-153","dependencies":[{"issue_id":"buh-vlw","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:35.00651252+03:00","created_by":"Igor Maslennikov"},{"issue_id":"buh-vlw","depends_on_id":"buh-7uh","type":"blocks","created_at":"2026-02-17T09:12:23.483483207+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-vn3","title":"Test Beads integration","description":"Test task to verify Beads is working correctly","status":"closed","priority":4,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T13:40:24.325176345+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T13:40:32.649950416+03:00","closed_at":"2026-01-14T13:40:32.649950416+03:00","close_reason":"Test completed - Beads integration verified"}
{"id":"buh-w0j","title":"Fix: useMemo dependency warning ChatsListContent (gh-60)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-14T17:31:16.655837038+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-14T17:33:42.994032162+03:00","closed_at":"2026-02-14T17:33:42.994032162+03:00","close_reason":"Fixed: ESLint errors resolved, type-check passed","external_ref":"gh-60"}
{"id":"buh-w1j","title":"gh-168: Fix Tracer Span Cleanup","description":"GitHub Issue: #168 | Score: 7 (sev=2, imp=0, lkh=5)\nRoot Cause: Missing span.end() call in error paths\nSolution: Add span.end() in finally block\nFiles: backend/src/bot/handlers/message.handler.ts:236\nExecutor: MAIN\nSimilar: gh-148 (closed as duplicate)","status":"closed","priority":3,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:11:53.874812811+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T11:45:35.458340567+03:00","closed_at":"2026-02-17T11:45:35.458340567+03:00","close_reason":"Fixed: span.end() in finally blocks","external_ref":"gh-168","dependencies":[{"issue_id":"buh-w1j","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:11:53.875847815+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-w1w","title":"P1: Add global manager fallback when chat managers empty","description":"sla-timer.worker.ts:122-143 - When no managers configured, system logs warning but takes no action. Add fallback to global_settings.globalManagerIds","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:16.252217505+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.843444149+03:00","closed_at":"2026-01-14T16:17:39.843444149+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-wl9","title":"gh-112: Missing Authorization for Chat Access","description":"GitHub Issue: #112 | Score: 21 (sev=7, imp=7, lkh=7)\nRoot Cause: getById procedure allows any authenticated user to view any chat\nSolution: Add ownership/role check in getById procedure\nFiles: backend/src/api/trpc/routers/chats.ts:137-194\nExecutor: fullstack-nextjs-specialist","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:08:26.390846218+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:44:28.464922632+03:00","closed_at":"2026-02-17T09:44:28.464922632+03:00","close_reason":"Closed","external_ref":"gh-112","dependencies":[{"issue_id":"buh-wl9","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:08:26.392003844+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-wrhc","title":"Process CRITICAL security issues #87-93","description":"Batch processing of remaining CRITICAL security and data integrity issues from security audit. Issues: #87, #88, #89, #90, #91, #92, #93.","status":"closed","priority":0,"issue_type":"epic","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:52:40.315761143+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:07.588479833+03:00","closed_at":"2026-02-17T12:02:07.588482047+03:00"}
{"id":"buh-wv4","title":"DEV MODE: Backend .env.example Update","description":"Add DEV_MODE and DEV_USER_EMAIL entries to backend/.env.example with comments.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:13.541779476+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.606225489+03:00","closed_at":"2026-01-30T17:34:34.606225489+03:00","close_reason":"Implemented"}
{"id":"buh-xch","title":"P2: Centralize queue configuration in environment variables","description":"Hardcoded values in alert.worker.ts, sla-timer.worker.ts, setup.ts. Create config/queue.config.ts with env vars.","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:20.880993331+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:25:35.574092798+03:00","closed_at":"2026-01-30T13:25:35.574092798+03:00","close_reason":"Implemented centralized queue configuration"}
{"id":"buh-xcw","title":"Remove deprecated slaResponseMinutes field entirely","description":"P0-1 from code review. Remove slaResponseMinutes from schema, drop column via migration, remove all 19 code/test references. slaThresholdMinutes is the canonical field.","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:40:29.332366305+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:45:50.141995699+03:00","closed_at":"2026-02-11T21:45:50.141995699+03:00","close_reason":"Done: removed slaResponseMinutes field entirely — schema, migration, 19 code/test refs"}
{"id":"buh-xe1","title":"gh-113: N+1 Query Problem in Analytics","description":"GitHub Issue: #113 | Score: 15 (sev=5, imp=3, lkh=7)\nRoot Cause: N+1 query in accountantPerformance procedure\nSolution: Use Prisma include/join to batch load relations\nFiles: backend/src/api/trpc/routers/analytics.ts:293-389\nExecutor: fullstack-nextjs-specialist","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:09:16.097835763+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T10:28:37.141496693+03:00","closed_at":"2026-02-17T10:28:37.141496693+03:00","close_reason":"Replaced N+1 queries with 3 batch queries: requests, feedback, accountants (gh-113)","external_ref":"gh-113","dependencies":[{"issue_id":"buh-xe1","depends_on_id":"buh-fil","type":"parent","created_at":"2026-02-17T09:09:16.098986755+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-xla","title":"Phase 6: Add logs navigation item to AdminLayout","description":"Add 'System Logs' navigation item to AdminLayout.tsx navigation items array.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:46.196945383+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:32:05.553175641+03:00","closed_at":"2026-01-16T14:32:05.553175641+03:00","close_reason":"Navigation item added to AdminLayout: 'Системные логи' with FileWarning icon, placed between Users and Settings"}
{"id":"buh-xox","title":"Add Privacy Mode troubleshooting section to docs/infrastructure/troubleshooting.md","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:18:05.238022971+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:18:42.950346573+03:00","closed_at":"2026-01-30T17:18:42.950346573+03:00","close_reason":"Added Privacy Mode troubleshooting section"}
{"id":"buh-y2i","title":"Fix: Multiple admin pages render blank on client-side navigation (hydration/CSS race)","description":"GitHub Issue #41. Affected: /reports, /feedback, /help stay blank. /settings blank until reload. /dashboard,/analytics,/chats flash briefly. DOM shows content but not visible. Probable CSS hydration race: CSS variables not applied, or AdminLayout returns null while isAuthorized=false (line 512). /reports uses framer-motion which may conflict with SSR. Files: frontend/src/components/layout/AdminLayout.tsx:447-514, frontend/src/app/reports/page.tsx (framer-motion), frontend/src/styles/design-system.css, frontend/src/app/globals.css","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:25:33.244967003+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:34:16.772180254+03:00","closed_at":"2026-02-12T13:34:16.772180254+03:00","close_reason":"Fixed: Removed buh-stagger class from AdminLayout content wrapper. Root cause: CSS animation opacity:0 on children overrode framer-motion inline styles, trapping pages at invisible state.","external_ref":"gh-41"}
{"id":"buh-ype","title":"Fix: console.warn → logger.warn + add warning when user not found in alert resolve","description":"Code review finding: alert.ts line 325 uses console.warn instead of structured logger.warn. Also add logger.warn when authenticated user not found in DB (line 332-338). Files: backend/src/api/trpc/routers/alert.ts","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T13:44:56.033586477+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T13:46:15.36993179+03:00","closed_at":"2026-02-12T13:46:15.36993179+03:00","close_reason":"Fixed: replaced console.warn with logger.warn, added structured warning when user not found in DB","external_ref":"review-1"}
{"id":"buh-yssb","title":"Add .min(1) to openrouterModel and REDIS_PASSWORD","description":"Prevent empty string for openrouterModel in settings schema and REDIS_PASSWORD in env schema","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:50:39.401371742+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:52:34.783108939+03:00","closed_at":"2026-02-17T09:52:34.783108939+03:00","close_reason":"Closed"}
{"id":"buh-z2x","title":"Add backend validation for manager configuration","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:44:37.247639694+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:47:56.274381606+03:00","closed_at":"2026-01-30T13:47:56.274381606+03:00","close_reason":"Added backend validation for SLA enable without managers + startup warning","external_ref":"gh-13"}
{"id":"buh-z3hc","title":"gh-89: classifyMessage missing input validation","description":"Score: 13 (sev=5, imp=3, lkh=5). classifyMessage() has no text length/type validation. Mitigated by handler-level TelegramMessageSchema (max 10000). Fix: add defense-in-depth validation at service level. File: classifier.service.ts","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T11:54:49.830665956+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T12:02:06.731499225+03:00","closed_at":"2026-02-17T12:02:06.731500625+03:00","external_ref":"gh-89","dependencies":[{"issue_id":"buh-z3hc","depends_on_id":"buh-wrhc","type":"blocks","created_at":"2026-02-17T11:55:01.309741985+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-z9se","title":"Add regex validation to TELEGRAM_ADMIN_CHAT_ID in env.ts","description":"Add /^-?\\d+$/ regex to env schema for TELEGRAM_ADMIN_CHAT_ID to validate at startup","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-17T09:50:39.724366374+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-17T09:52:34.784339384+03:00","closed_at":"2026-02-17T09:52:34.784339384+03:00","close_reason":"Closed"}
{"id":"buh-zdc","title":"Phase 3: Create tRPC logs router with all procedures","description":"Create logs.ts router with procedures: list, listGrouped, getById, updateStatus, bulkUpdateStatus, delete. Register in appRouter.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:40.588733612+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:20:45.825923039+03:00","closed_at":"2026-01-16T14:20:45.825923039+03:00","close_reason":"tRPC logs router implemented with 6 procedures: list (cursor pagination), listGrouped (fingerprint grouping), getById, updateStatus, bulkUpdateStatus, delete. All admin-guarded mutations, type-check passed"}
{"id":"buh-zi0","title":"Fix new chat ignores defaultSlaThreshold","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:08.313784117+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.744294903+03:00","closed_at":"2026-01-30T13:09:12.744294903+03:00","close_reason":"Fixed all bugs, type-check and build passed"}

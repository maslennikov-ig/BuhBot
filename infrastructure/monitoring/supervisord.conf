[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor
loglevel=info

# ============================================
# Prometheus
# ============================================
[program:prometheus]
command=/usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/prometheus --web.console.libraries=/opt/prometheus/console_libraries --web.console.templates=/opt/prometheus/consoles --web.enable-lifecycle
user=nobody
autostart=true
autorestart=true
startretries=10
startsecs=10
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=1

# ============================================
# Grafana
# ============================================
[program:grafana]
command=/opt/grafana/bin/grafana-server --config=/etc/grafana/grafana.ini --homepath=/opt/grafana
user=nobody
autostart=true
autorestart=true
startretries=10
startsecs=10
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=2
environment=GF_PATHS_DATA="/var/lib/grafana",GF_PATHS_LOGS="/var/log/grafana",GF_PATHS_PLUGINS="/var/lib/grafana/plugins",GF_PATHS_PROVISIONING="/etc/grafana/provisioning"

# ============================================
# Uptime Kuma
# ============================================
[program:uptime-kuma]
command=/usr/bin/node /app/uptime-kuma/server/server.js
directory=/app/uptime-kuma
user=nobody
autostart=true
autorestart=true
startretries=10
startsecs=10
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=3
environment=DATA_DIR="/app/data",NODE_ENV="production",PORT="3001"

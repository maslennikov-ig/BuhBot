# Чек-лист проверки исправлений от 25.12.2025

> **Версия:** После исправлений из отчёта бухгалтерии
> **Тестовый URL:** https://buhbot.aidevteam.ru

---

## 1. Наложение элементов Danger Zone

**Где проверить:** Настройки любого чата → вкладка "Настройки"

### Шаги:

1. Открыть https://buhbot.aidevteam.ru/chats
2. Выбрать любой чат из списка
3. Перейти на вкладку **"Настройки"**
4. Нажать на выпадающий список **"Ответственный бухгалтер"**

### Ожидаемый результат:

| Проверка                          | Ожидание                                | ✓/✗ |
| --------------------------------- | --------------------------------------- | --- |
| Выпадающий список открывается     | Список появляется поверх всех элементов | ☐   |
| Danger Zone не перекрывает список | Красный блок внизу не мешает выбору     | ☐   |
| Можно выбрать бухгалтера          | Клик по имени назначает ответственного  | ☐   |
| Можно прокрутить список           | Если бухгалтеров много, scroll работает | ☐   |

---

## 2. Назначение ответственного бухгалтера

**Где проверить:** Настройки чата → "Ответственный бухгалтер"

### Шаги:

1. Открыть настройки любого чата
2. Нажать на выпадающий список "Ответственный бухгалтер"
3. Выбрать любого бухгалтера из списка
4. Нажать **"Сохранить"**
5. Обновить страницу (F5)

### Ожидаемый результат:

| Проверка               | Ожидание                               | ✓/✗ |
| ---------------------- | -------------------------------------- | --- |
| Список не пустой       | Видны бухгалтеры с ролью manager/admin | ☐   |
| Выбор сохраняется      | После F5 бухгалтер остался выбранным   | ☐   |
| Toast появляется       | "Настройки успешно сохранены"          | ☐   |
| Можно снять назначение | Выбрать "Не назначен" работает         | ☐   |

**Если список пустой:**

- Проверить, есть ли пользователи с ролью `manager` или `admin` в системе
- Перейти в Настройки → Пользователи и проверить роли

---

## 3. Добавление чата через бота

**Где проверить:** Список чатов → кнопка "Подключить чат"

### Шаги:

1. Открыть https://buhbot.aidevteam.ru/chats
2. Нажать **"Подключить чат"**
3. Нажать **"Сгенерировать ссылку"**

### Ожидаемый результат:

| Проверка                     | Ожидание                                                                         | ✓/✗ |
| ---------------------------- | -------------------------------------------------------------------------------- | --- |
| Toast сообщение              | "Ссылка готова! Отправьте её клиенту для подключения чата"                       | ☐   |
| Пояснение под ссылкой        | "Чат появится в системе после того, как клиент нажмёт на ссылку и напишет боту." | ☐   |
| Выпадающий список бухгалтера | Открывается без проблем внутри модального окна                                   | ☐   |

### Проверка вкладки "Код":

1. Переключиться на вкладку **"Код"**
2. Нажать **"Сгенерировать код"**

| Проверка            | Ожидание                                                                                | ✓/✗ |
| ------------------- | --------------------------------------------------------------------------------------- | --- |
| Код появился        | Показана команда `/connect XXXXX`                                                       | ☐   |
| Пояснение под кодом | "Добавьте бота в группу, отправьте этот код. Чат появится в системе после подключения." | ☐   |

---

## 4. Отображение нарушений SLA

**Где проверить:** Страница "Нарушения SLA"

### Шаги:

1. Открыть https://buhbot.aidevteam.ru/violations
2. Найти в таблице строку, где бухгалтер не был назначен

### Ожидаемый результат:

| Проверка            | Ожидание                                                   | ✓/✗ |
| ------------------- | ---------------------------------------------------------- | --- |
| Колонка "Бухгалтер" | Если не назначен — жёлтый badge с иконкой ⚠️ "Не назначен" | ☐   |
| Обычный бухгалтер   | Имя отображается обычным текстом                           | ☐   |

**Если нет нарушений:** Можно создать тестовое: не отвечать на сообщение клиента в течение SLA порога (по умолчанию 60 минут).

---

## 5. Проверка в Telegram (полный цикл)

### Шаг A: Создать приглашение

1. В веб-панели: Чаты → Подключить чат → Сгенерировать ссылку
2. Скопировать ссылку

### Шаг B: Подключить чат

1. Открыть ссылку в Telegram
2. Нажать "Start" или написать боту
3. Бот должен ответить: "✅ Чат успешно подключен!"

### Шаг C: Проверить в веб-панели

1. Обновить страницу Чаты (F5)
2. Новый чат должен появиться в списке

| Проверка                | Ожидание                          | ✓/✗ |
| ----------------------- | --------------------------------- | --- |
| Чат появился            | Виден в списке чатов              | ☐   |
| Название корректное     | Отображается название из Telegram | ☐   |
| Можно открыть настройки | Клик по чату открывает детали     | ☐   |

---

## Быстрые ссылки для проверки

| Страница          | URL                                          |
| ----------------- | -------------------------------------------- |
| Список чатов      | https://buhbot.aidevteam.ru/chats            |
| Нарушения SLA     | https://buhbot.aidevteam.ru/violations       |
| Настройки профиля | https://buhbot.aidevteam.ru/settings/profile |
| Пользователи      | https://buhbot.aidevteam.ru/settings/users   |

---

## Результаты тестирования

**Дата:** **\*\***\_\_\_**\*\***

**Тестировщик:** **\*\***\_\_\_**\*\***

| #   | Проверка                      | Результат         | Комментарий |
| --- | ----------------------------- | ----------------- | ----------- |
| 1   | Danger Zone не перекрывает    | ☐ OK / ☐ Проблема |             |
| 2   | Назначение бухгалтера         | ☐ OK / ☐ Проблема |             |
| 3   | Сообщения при добавлении чата | ☐ OK / ☐ Проблема |             |
| 4   | SLA "Не назначен" выделен     | ☐ OK / ☐ Проблема |             |
| 5   | Полный цикл Telegram          | ☐ OK / ☐ Проблема |             |

---

_Создано: 25.12.2025_

{"id":"buh-08q","title":"Fix: Messages silently dropped when slaEnabled=false","description":"message.handler.ts:96-103 делает early return ДО логирования в ChatMessage когда !slaEnabled. Фикс: оставить только !monitoringEnabled в раннем return, добавить !slaEnabled check ПОСЛЕ логирования (после line 181)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:13.455454247+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:56.760663798+03:00","closed_at":"2026-02-11T20:25:56.760663798+03:00","close_reason":"Fixed: moved SLA check after message logging in message.handler.ts — messages always logged to ChatMessage, SLA classification gated separately","external_ref":"gh-31a"}
{"id":"buh-0sl","title":"DEV MODE: Backend ENV Configuration","description":"Add DEV_MODE and DEV_USER_EMAIL to env.ts schema with proper validation. Export isDevMode helper function.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:06.153147623+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.5933972+03:00","closed_at":"2026-01-30T17:34:34.5933972+03:00","close_reason":"Implemented"}
{"id":"buh-1v0","title":"Change request resolution from FIFO to LIFO","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:44:35.485647435+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:46:43.78939+03:00","closed_at":"2026-01-30T13:46:43.78939+03:00","close_reason":"Implemented FIFO→LIFO: findLatestPendingRequest with desc ordering","external_ref":"gh-15"}
{"id":"buh-21m","title":"DEV MODE: Frontend tRPC Client","description":"Modify frontend/src/lib/trpc.ts to send X-Dev-Mode header when isDevMode is true.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:18.350260118+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.02395991+03:00","closed_at":"2026-01-30T17:36:16.02395991+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-21m","depends_on_id":"buh-3wu","type":"blocks","created_at":"2026-01-30T17:32:33.309007332+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-2d7","title":"Enhancement: Validate accountant @username against Telegram/DB (gh-38-a)","status":"open","priority":3,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:43:04.731342065+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:43:04.731342065+03:00"}
{"id":"buh-2vc","title":"Auto-send SLA breach notification to group chat","status":"closed","priority":3,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:44:38.511395968+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:53:03.456259467+03:00","closed_at":"2026-01-30T13:53:03.456259467+03:00","close_reason":"Implemented notifyInChatOnBreach: Prisma field, worker logic, format function, UI toggle","external_ref":"gh-12"}
{"id":"buh-3fb","title":"P1: Fix recovery logic to use global manager fallback","description":"timer.service.ts:681-689 - Recovery uses getManagersForChat() without global fallback. Add fallback to global managers.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:18.349454368+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.840912472+03:00","closed_at":"2026-01-14T16:15:17.840912472+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-3wu","title":"DEV MODE: Frontend Config Module","description":"Create frontend/src/lib/config.ts with isDevMode and devMockUser exports.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:16.274647906+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.599872289+03:00","closed_at":"2026-01-30T17:34:34.599872289+03:00","close_reason":"Implemented"}
{"id":"buh-4ru","title":"P2: Add transaction boundaries for SLA breach handling","description":"sla-timer.worker.ts:77-101 - Multiple DB updates without transaction. Use prisma.$transaction for atomic operations.","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:19.746350333+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.835558086+03:00","closed_at":"2026-01-14T16:17:39.835558086+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-5h3","title":"DEV MODE: Context Auth Bypass","description":"Modify context.ts to return mock admin user when isDevMode is true. Use existing logger instead of console.log.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:09.081496197+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.01021549+03:00","closed_at":"2026-01-30T17:36:16.01021549+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-5h3","depends_on_id":"buh-0sl","type":"blocks","created_at":"2026-01-30T17:32:32.80521142+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-65g","title":"Phase 2: Implement ErrorCaptureService with fingerprinting","description":"Create error-capture.service.ts with fingerprinting logic (MD5 hash normalization). Add DatabaseTransport to Winston logger for automatic error capture to DB.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:39.030251238+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:15:27.642114722+03:00","closed_at":"2026-01-16T14:15:27.642114722+03:00","close_reason":"ErrorCaptureService implemented with MD5 fingerprinting, normalization (UUIDs, timestamps, numbers), 24h deduplication window, Winston DatabaseTransport integration complete, type-check passed"}
{"id":"buh-6m0","title":"Fix SLA Timer ignores GlobalSettings working hours","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:12.052978806+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.751451128+03:00","closed_at":"2026-01-30T13:09:12.751451128+03:00","close_reason":"Fixed all bugs, type-check and build passed"}
{"id":"buh-6qm","title":"Fix: SLA save blocked when no managers configured (gh-38)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:42:46.650794234+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:44:38.274292578+03:00","closed_at":"2026-02-12T11:44:38.274292578+03:00","close_reason":"Fixed in commit f99b367","external_ref":"gh-38"}
{"id":"buh-715","title":"DEV MODE: Seed Script Dev User","description":"Add DEV_ADMIN user with UUID aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa to seed.ts.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:14.901348277+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.626351653+03:00","closed_at":"2026-01-30T17:34:34.626351653+03:00","close_reason":"Implemented"}
{"id":"buh-78q","title":"Add logging when no managers configured for alerts","description":"В backend/src/queues/alert.worker.ts добавить logger.warn когда managerIds.length === 0","status":"closed","priority":3,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:05:44.706863307+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.847639593+03:00","closed_at":"2026-01-14T16:15:17.847639593+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-7bc","title":"Fix: SLA breach notification leaks into client chat (notifyInChatOnBreach default)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:17:58.777150877+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:56.513413434+03:00","closed_at":"2026-02-11T20:25:56.513413434+03:00","close_reason":"Fixed: changed notifyInChatOnBreach @default(true)→@default(false) in schema, migration updates existing rows, registerChat default changed, frontend defaults fixed, JSDoc @test-only added to worker","external_ref":"gh-31"}
{"id":"buh-7ly","title":"Fix alert shows 0 minutes instead of actual time","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:07.407544902+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:05:11.112542925+03:00","closed_at":"2026-01-30T13:05:11.112542925+03:00","close_reason":"Fixed: use slaAlerts[0].minutesElapsed instead of slaWorkingMinutes"}
{"id":"buh-8tp","title":"Add invite_link to Chat model and fetch on registration","description":"## Context\n- Chat model has no inviteLink field\n- t.me/c/ links only work for supergroups, not regular groups\n- Need to store invite_link in DB and use it for 'Open chat' button\n\n## Requirements\n1. Add inviteLink field to Chat model (prisma schema)\n2. Create migration\n3. On chat registration (/connect), fetch invite link via Telegram API:\n   - ctx.telegram.exportChatInviteLink(chatId) or createChatInviteLink\n4. Store invite_link in Chat record\n5. Update alert.keyboard.ts to use inviteLink if available, fallback to t.me/c/ for supergroups\n\n## Files to modify\n- backend/prisma/schema.prisma (add inviteLink String?)\n- backend/src/bot/handlers/invitation.handler.ts (fetch and store invite link)\n- backend/src/bot/keyboards/alert.keyboard.ts (use inviteLink in buildAlertKeyboard)\n\n## Telegram API\n- ctx.telegram.exportChatInviteLink(chatId) - returns primary invite link\n- ctx.telegram.createChatInviteLink(chatId) - creates new invite link","status":"closed","priority":1,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:40:41.02058533+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:49:01.6098149+03:00","closed_at":"2026-01-14T16:49:01.6098149+03:00","close_reason":"Implemented and deployed"}
{"id":"buh-9pw","title":"Fix: slaEnabled schema default contradicts actual behavior","description":"P2-1 from code review. Schema has @default(true) but chat-event.handler.ts always creates with slaEnabled:false. Misleading default causes confusion. Change schema default to false + migration.","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:22:21.050163524+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:24:08.08747908+03:00","closed_at":"2026-02-11T21:24:08.08747908+03:00","close_reason":"Fixed: changed slaEnabled @default(true)→@default(false) in schema to match actual handler behavior + migration"}
{"id":"buh-bjw","title":"Add FAQ entry for Privacy Mode to docs/user-guide/faq-users.md","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:18:06.298650541+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:19:03.035739+03:00","closed_at":"2026-01-30T17:19:03.035739+03:00","close_reason":"Added FAQ entry for Privacy Mode"}
{"id":"buh-brr","title":"Phase 5: Create frontend logs components (Table, Header, Filters, StatusBadge)","description":"Create LogsTable.tsx, LogsHeader.tsx, LogsFilters.tsx, StatusBadge.tsx components. Follow existing patterns from RequestsTable.tsx.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:44.188449266+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:29:56.44419224+03:00","closed_at":"2026-01-16T14:29:56.44419224+03:00","close_reason":"Frontend logs UI complete: 6 files created (4 components + 2 pages), type-check passed, follows BuhBot design patterns, integrated with tRPC router"}
{"id":"buh-chq","title":"HOTFIX: Configure SLA settings - set manager_telegram_ids and sla_threshold=15","description":"Root cause: manager_telegram_ids was empty [], sla_threshold was 60 instead of 15. Fixed via SQL: UPDATE global_settings SET global_manager_ids=['166848328'], default_sla_threshold=15; UPDATE chats SET sla_threshold_minutes=15, manager_telegram_ids=['166848328'] WHERE sla_enabled=true","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T15:59:40.995281559+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T15:59:47.159179014+03:00","closed_at":"2026-01-14T15:59:47.159179014+03:00","close_reason":"Fixed: Updated global_settings and all 4 chats with sla_enabled=true. SLA threshold set to 15 min, manager_telegram_ids set to [166848328]"}
{"id":"buh-cz5","title":"Fix: analytics.ts uses wrong SLA field (slaResponseMinutes instead of slaThresholdMinutes)","description":"P0-2 from code review. analytics.ts lines 73,103,284,310,940,974 use slaResponseMinutes. All SLA compliance metrics, dashboard KPIs, exports are calculated against the wrong threshold. Must replace all 6 occurrences with slaThresholdMinutes.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:22:19.324656783+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:24:07.768016037+03:00","closed_at":"2026-02-11T21:24:07.768016037+03:00","close_reason":"Fixed: replaced all 8 occurrences of slaResponseMinutes→slaThresholdMinutes in analytics.ts (select blocks + calculations + exports)"}
{"id":"buh-dex","title":"P1: Validate manager lists before alert creation","description":"alert.service.ts:133-164 - Alert created BEFORE checking for managers. Move validation before creation, add global fallback.","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:17.240767346+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.850309561+03:00","closed_at":"2026-01-14T16:17:39.850309561+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-dvv","title":"DEV MODE: Prisma Connection Improvements","description":"Add longer connection timeout for development mode (15s vs 5s). Ensure env.ts is loaded first.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:12.2731938+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.619306466+03:00","closed_at":"2026-01-30T17:34:34.619306466+03:00","close_reason":"Implemented"}
{"id":"buh-e38","title":"Add regression tests T1-T3 from code review","description":"T1: test analytics uses slaThresholdMinutes. T2: test migration handler upsert no duplicates. T3: test notifyInChatOnBreach default=false","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:40:29.577625207+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:45:50.40670164+03:00","closed_at":"2026-02-11T21:45:50.40670164+03:00","close_reason":"Done: 6 regression tests added (T1-T3), all passing"}
{"id":"buh-e40","title":"Fix: notifyInChatOnBreach toggle not persisting (gh-37)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:42:44.199884989+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:44:38.267574289+03:00","closed_at":"2026-02-12T11:44:38.267574289+03:00","close_reason":"Fixed in commit f99b367","external_ref":"gh-37"}
{"id":"buh-e92","title":"DEV MODE: Frontend LoginForm","description":"Add DEV MODE banner and auth bypass to LoginForm.tsx.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:19.606382593+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.031802071+03:00","closed_at":"2026-01-30T17:36:16.031802071+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-e92","depends_on_id":"buh-3wu","type":"blocks","created_at":"2026-01-30T17:32:33.60739866+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-eg8","title":"Fix: SLA breach alert silently fails when no managers configured","description":"Когда managerTelegramIds и globalManagerIds пусты, sla-timer.worker.ts создаёт alert со статусом failed и logger.error — никто не узнаёт о breach. Warning есть в ChatSettingsForm, но НЕТ в GeneralSettingsForm (предыдущий фикс buh-w1w был неполным). Фикс: добавить warning banner в GeneralSettingsForm","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:23.513288171+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:57.5010709+03:00","closed_at":"2026-02-11T20:25:57.5010709+03:00","close_reason":"Fixed: added warning banner in GeneralSettingsForm when globalManagerIds is empty","external_ref":"gh-34"}
{"id":"buh-fkt","title":"Fix: Frontend displays wrong SLA field (slaResponseMinutes vs slaThresholdMinutes)","description":"Frontend показывает slaResponseMinutes, а backend использует slaThresholdMinutes для breach detection. tRPC router никогда не возвращает slaThresholdMinutes. Фикс: заменить slaResponseMinutes→slaThresholdMinutes в tRPC output schemas, select блоках, и всех frontend компонентах","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:19.01999254+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:57.255599877+03:00","closed_at":"2026-02-11T20:25:57.255599877+03:00","close_reason":"Fixed: replaced slaResponseMinutes→slaThresholdMinutes in tRPC output schemas, Prisma select blocks, all frontend components","external_ref":"gh-33"}
{"id":"buh-g7p","title":"Fix: Duplicate chat entries during group-to-supergroup migration","description":"chat-event.handler.ts:169 использует prisma.chat.create() вместо upsert(). При миграции group→supergroup my_chat_member создаёт запись первым, затем migrate_to_chat_id падает с Unique constraint. Фикс: заменить create на upsert, пометить старый чат [MIGRATED]","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T20:18:16.242065542+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T20:25:57.010225155+03:00","closed_at":"2026-02-11T20:25:57.010225155+03:00","close_reason":"Fixed: replaced create() with upsert() in migrate_to_chat_id handler, old chat marked [MIGRATED]","external_ref":"gh-32"}
{"id":"buh-gma","title":"Code review: SLA/alert system","description":"Провести код-ревью SLA/alert системы: alert.worker.ts, sla-timer.worker.ts, message.handler.ts. Проверить на баги, best practices, улучшения.","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:07:58.777748986+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.857514217+03:00","closed_at":"2026-01-14T16:17:39.857514217+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-gn4","title":"Fix ClassifierService ignores aiConfidenceThreshold","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:13.261336077+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.75916173+03:00","closed_at":"2026-01-30T13:09:12.75916173+03:00","close_reason":"Fixed all bugs, type-check and build passed"}
{"id":"buh-gvw","title":"DEV MODE: docker-compose.local.yml","description":"Create infrastructure/docker-compose.local.yml with postgres and redis services for local development.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:21.922352333+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.632638781+03:00","closed_at":"2026-01-30T17:34:34.632638781+03:00","close_reason":"Implemented"}
{"id":"buh-hg4","title":"Fix: Admin footer version out of sync with Release Please (gh-39)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:42:45.299098505+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:44:38.27225796+03:00","closed_at":"2026-02-12T11:44:38.27225796+03:00","close_reason":"Fixed in commit f99b367","external_ref":"gh-39"}
{"id":"buh-hzd","title":"P0: Fix race condition in alert delivery status updates","description":"alert.worker.ts:203-223 - Two separate DB updates for same alert. If crash between updates, alert stuck in 'sent' state. Fix: collect all message IDs, single atomic update at end.","status":"closed","priority":0,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:15.093742536+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.833742308+03:00","closed_at":"2026-01-14T16:15:17.833742308+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-jbn","title":"Fix mock paths in response.handler.test.ts","description":"vi.mock() uses alias paths (@/lib/prisma.js) but handler imports use relative paths (../../lib/prisma.js). Mocks don't intercept.","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-04T14:50:41.919596456+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-04T14:52:19.804143723+03:00","closed_at":"2026-02-04T14:52:19.804143723+03:00","close_reason":"Fixed: changed vi.mock() alias paths to relative paths matching handler imports. 34/34 tests pass, 83/83 full suite.","external_ref":"gh-29"}
{"id":"buh-jo3","title":"Add warning in UI when manager_telegram_ids is empty","description":"UI позволяет сохранять чат без manager_telegram_ids, что делает уведомления невозможными. Добавить warning в frontend/src/app/chats/[id]/page.tsx","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:05:43.671455481+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.827969707+03:00","closed_at":"2026-01-14T16:17:39.827969707+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-k5a","title":"Notify all accountants from accountantUsernames array","description":"## Context\n- Currently only assignedAccountant receives DM notification\n- accountantUsernames array may contain multiple accountants\n- Need to notify ALL accountants, not just the assigned one\n\n## Requirements\n1. In alert-callback.handler.ts, collect all accountant telegram_ids:\n   - assignedAccountant.telegramId (primary)\n   - For each username in accountantUsernames, lookup in users table by telegramUsername\n2. Send notification to ALL found telegram_ids (not just one)\n3. Fallback to group mention if no telegram_ids found\n\n## Files to modify\n- backend/src/bot/handlers/alert-callback.handler.ts\n\n## DB Query needed\nSELECT telegram_id FROM users WHERE telegram_username IN (accountantUsernames)\n\n## Edge cases\n- Duplicate: assignedAccountant might also be in accountantUsernames - dedupe\n- Not found: username in array but no matching user - skip silently\n- All fail: fallback to group mention","status":"closed","priority":1,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:40:42.051395191+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:49:01.615871195+03:00","closed_at":"2026-01-14T16:49:01.615871195+03:00","close_reason":"Implemented and deployed"}
{"id":"buh-k9r","title":"DEV MODE: Supabase Client Non-Nullable","description":"Modify supabase.ts to use placeholder values in DEV MODE instead of throwing errors. Keep client non-nullable.","status":"closed","priority":1,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:10.070782155+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:36:16.016877487+03:00","closed_at":"2026-01-30T17:36:16.016877487+03:00","close_reason":"Implemented","dependencies":[{"issue_id":"buh-k9r","depends_on_id":"buh-0sl","type":"blocks","created_at":"2026-01-30T17:32:33.04821059+03:00","created_by":"Igor Maslennikov"}]}
{"id":"buh-l8q","title":"Fix BigInt serialization in logger","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:05.524518456+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:04:56.454490145+03:00","closed_at":"2026-01-30T13:04:56.454490145+03:00","close_reason":"Fixed BigInt serialization in logger"}
{"id":"buh-mfp","title":"Chore: document slaResponseMinutes dual-field sync in settings.ts","description":"P1-1 from code review. settings.ts line 668 updates both slaThresholdMinutes and slaResponseMinutes without explanation. Add comment documenting why both fields are kept in sync (backward compat until deprecation).","status":"closed","priority":3,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:22:22.980762853+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:24:08.390771586+03:00","closed_at":"2026-02-11T21:24:08.390771586+03:00","close_reason":"Fixed: added comment to settings.ts explaining legacy field sync"}
{"id":"buh-mgs","title":"Phase 4: Create frontend logs pages (main + detail)","description":"Create /logs/page.tsx (main list page) and /logs/[id]/page.tsx (detail page). Use AdminLayout, tRPC queries, and table components.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:42.628678792+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:29:56.438322317+03:00","closed_at":"2026-01-16T14:29:56.438322317+03:00","close_reason":"Frontend logs UI complete: 6 files created (4 components + 2 pages), type-check passed, follows BuhBot design patterns, integrated with tRPC router"}
{"id":"buh-mpj","title":"Fix notifyInChatOnBreach not set on chat creation (gh-17)","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T16:14:50.186535448+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T16:14:56.722879823+03:00","closed_at":"2026-01-30T16:14:56.722879823+03:00","close_reason":"Fixed: Added notifyInChatOnBreach: true to registerChat create block, migration to update existing chats, tests added","external_ref":"gh-17"}
{"id":"buh-mym","title":"Fix hardcoded min(15) in SLA validation","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:14.308506073+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.767044082+03:00","closed_at":"2026-01-30T13:09:12.767044082+03:00","close_reason":"Fixed all bugs, type-check and build passed"}
{"id":"buh-n4m","title":"Add backend integration tests for chats.update mutation","description":"Code review found zero test coverage for chats.update mutation. Need tests for: 1) SLA enable transition with/without managers, 2) notifyInChatOnBreach persistence, 3) partial updates with undefined fields, 4) SLA already enabled with removed managers. File: backend/src/api/trpc/routers/__tests__/chats.test.ts","status":"open","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:51:00.487394546+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:51:00.487394546+03:00"}
{"id":"buh-nao","title":"DEV MODE: Frontend .env.example Update","description":"Add NEXT_PUBLIC_DEV_MODE entry to frontend/.env.example.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:20.976682957+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.612648825+03:00","closed_at":"2026-01-30T17:34:34.612648825+03:00","close_reason":"Implemented"}
{"id":"buh-nhg","title":"Update README.md prerequisites with Privacy Mode warning","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:18:07.722187876+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:19:20.227839396+03:00","closed_at":"2026-01-30T17:19:20.227839396+03:00","close_reason":"Updated README prerequisites with Privacy Mode warning"}
{"id":"buh-oyj","title":"Phase 1: Add ErrorLog Prisma model and migration","description":"Add ErrorLog model with ErrorStatus enum to Prisma schema. Include RLS policies for admin-only access. Generate and apply migration.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:36.343649533+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:04:24.438053488+03:00","closed_at":"2026-01-16T14:04:24.438053488+03:00","close_reason":"ErrorLog Prisma model added with ErrorStatus enum, migration 20260116000000_add_error_logs created and applied, RLS policies implemented, User model updated with assignedErrors relation"}
{"id":"buh-phi","title":"Fix: Add logger.warn when SLA enabled without managers + defensive ?? false for notifyInChatOnBreach","description":"Code review found: 1) SLA validation skips manager check when SLA already enabled. Add logger.warn for monitoring. 2) notifyInChatOnBreach should use ?? false as defensive fallback. Files: backend/src/api/trpc/routers/chats.ts, frontend/src/components/chats/ChatSettingsForm.tsx","status":"in_progress","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-12T11:50:59.005912641+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-12T11:51:04.909228795+03:00"}
{"id":"buh-qgo","title":"Fix Redis eviction policy for BullMQ","description":"Redis настроен с allkeys-lru, должен быть noeviction для BullMQ. Файл: infrastructure/docker-compose.yml","status":"closed","priority":3,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:05:45.830142822+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:15:17.854116079+03:00","closed_at":"2026-01-14T16:15:17.854116079+03:00","close_reason":"Fixed: race condition, recovery fallback, logging, Redis policy"}
{"id":"buh-r5j","title":"Fix Release Please workflow (gh-26, gh-27, gh-28)","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-04T12:45:10.005073347+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-04T12:52:26.903954443+03:00","closed_at":"2026-02-04T12:52:26.903954443+03:00","close_reason":"Fixed: enabled GH Actions PR permission, synced local main, verified workflow (run #21643796447 succeeded, PR #30 created), closed issues #26, #27, #28","external_ref":"gh-26"}
{"id":"buh-r97","title":"Global SLA threshold should update existing chats (gh-16)","status":"closed","priority":2,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T16:14:51.637753302+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T16:14:58.480402397+03:00","closed_at":"2026-01-30T16:14:58.480402397+03:00","close_reason":"Fixed: updateSlaThresholds now updates all existing chats via chat.updateMany(), returns updatedChats count, tests added","external_ref":"gh-16"}
{"id":"buh-vn3","title":"Test Beads integration","description":"Test task to verify Beads is working correctly","status":"closed","priority":4,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T13:40:24.325176345+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T13:40:32.649950416+03:00","closed_at":"2026-01-14T13:40:32.649950416+03:00","close_reason":"Test completed - Beads integration verified"}
{"id":"buh-w1w","title":"P1: Add global manager fallback when chat managers empty","description":"sla-timer.worker.ts:122-143 - When no managers configured, system logs warning but takes no action. Add fallback to global_settings.globalManagerIds","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:16.252217505+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-14T16:17:39.843444149+03:00","closed_at":"2026-01-14T16:17:39.843444149+03:00","close_reason":"Fixed: UI warning, transaction boundaries, manager validation"}
{"id":"buh-wv4","title":"DEV MODE: Backend .env.example Update","description":"Add DEV_MODE and DEV_USER_EMAIL entries to backend/.env.example with comments.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:32:13.541779476+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:34:34.606225489+03:00","closed_at":"2026-01-30T17:34:34.606225489+03:00","close_reason":"Implemented"}
{"id":"buh-xch","title":"P2: Centralize queue configuration in environment variables","description":"Hardcoded values in alert.worker.ts, sla-timer.worker.ts, setup.ts. Create config/queue.config.ts with env vars.","status":"closed","priority":2,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-14T16:13:20.880993331+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:25:35.574092798+03:00","closed_at":"2026-01-30T13:25:35.574092798+03:00","close_reason":"Implemented centralized queue configuration"}
{"id":"buh-xcw","title":"Remove deprecated slaResponseMinutes field entirely","description":"P0-1 from code review. Remove slaResponseMinutes from schema, drop column via migration, remove all 19 code/test references. slaThresholdMinutes is the canonical field.","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-02-11T21:40:29.332366305+03:00","created_by":"Igor Maslennikov","updated_at":"2026-02-11T21:45:50.141995699+03:00","closed_at":"2026-02-11T21:45:50.141995699+03:00","close_reason":"Done: removed slaResponseMinutes field entirely — schema, migration, 19 code/test refs"}
{"id":"buh-xla","title":"Phase 6: Add logs navigation item to AdminLayout","description":"Add 'System Logs' navigation item to AdminLayout.tsx navigation items array.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:46.196945383+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:32:05.553175641+03:00","closed_at":"2026-01-16T14:32:05.553175641+03:00","close_reason":"Navigation item added to AdminLayout: 'Системные логи' with FileWarning icon, placed between Users and Settings"}
{"id":"buh-xox","title":"Add Privacy Mode troubleshooting section to docs/infrastructure/troubleshooting.md","status":"closed","priority":1,"issue_type":"chore","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T17:18:05.238022971+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T17:18:42.950346573+03:00","closed_at":"2026-01-30T17:18:42.950346573+03:00","close_reason":"Added Privacy Mode troubleshooting section"}
{"id":"buh-z2x","title":"Add backend validation for manager configuration","status":"closed","priority":2,"issue_type":"feature","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:44:37.247639694+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:47:56.274381606+03:00","closed_at":"2026-01-30T13:47:56.274381606+03:00","close_reason":"Added backend validation for SLA enable without managers + startup warning","external_ref":"gh-13"}
{"id":"buh-zdc","title":"Phase 3: Create tRPC logs router with all procedures","description":"Create logs.ts router with procedures: list, listGrouped, getById, updateStatus, bulkUpdateStatus, delete. Register in appRouter.","status":"closed","priority":2,"issue_type":"task","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-16T13:57:40.588733612+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-16T14:20:45.825923039+03:00","closed_at":"2026-01-16T14:20:45.825923039+03:00","close_reason":"tRPC logs router implemented with 6 procedures: list (cursor pagination), listGrouped (fingerprint grouping), getById, updateStatus, bulkUpdateStatus, delete. All admin-guarded mutations, type-check passed"}
{"id":"buh-zi0","title":"Fix new chat ignores defaultSlaThreshold","status":"closed","priority":1,"issue_type":"bug","owner":"maslennikov.ig@gmail.com","created_at":"2026-01-30T13:04:08.313784117+03:00","created_by":"Igor Maslennikov","updated_at":"2026-01-30T13:09:12.744294903+03:00","closed_at":"2026-01-30T13:09:12.744294903+03:00","close_reason":"Fixed all bugs, type-check and build passed"}
